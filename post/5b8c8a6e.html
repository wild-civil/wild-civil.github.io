<!DOCTYPE html><html lang="[&quot;en&quot;,&quot;zh-CN&quot;,&quot;default&quot;]" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>EKF Vs. FGO | èˆªã®å°ä¸–ç•Œ</title><meta name="keywords" content="XKF"><meta name="author" content="Civil"><meta name="copyright" content="Civil"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="éšä¾¿è®°äº†ç‚¹ä¸œè¥¿">
<meta property="og:type" content="article">
<meta property="og:title" content="EKF Vs. FGO">
<meta property="og:url" content="https://wild-civil.github.io/post/5b8c8a6e.html">
<meta property="og:site_name" content="èˆªã®å°ä¸–ç•Œ">
<meta property="og:description" content="éšä¾¿è®°äº†ç‚¹ä¸œè¥¿">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://youpai.hanvon.top/blog/article/Navigation/XKF/UKF/UKF%20vs.%20EKF%20illustration.png">
<meta property="article:published_time" content="2024-11-16T06:37:38.000Z">
<meta property="article:modified_time" content="2025-07-01T07:37:33.710Z">
<meta property="article:author" content="Civil">
<meta property="article:tag" content="XKF">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://youpai.hanvon.top/blog/article/Navigation/XKF/UKF/UKF%20vs.%20EKF%20illustration.png"><link rel="shortcut icon" href="/images/dragon_and_knight.jpg"><link rel="canonical" href="https://wild-civil.github.io/post/5b8c8a6e"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  noticeOutdate: {"limitDay":800,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'EKF Vs. FGO',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-07-01 15:37:33'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><script src="https://cdn.jsdelivr.net/npm/cardlink"></script><link rel="stylesheet" href="/css/haiyong/haiyong_page.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/tag.css"><link rel="stylesheet" href="/css/welcome.css?1"><link rel="stylesheet" href="/css/essay_page/essay_page.css"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper-anzhiyu@1.0.4/lib/swiper.min.css"><link rel="stylesheet" href="/css/essay_page/home_essay_bar.css"><link rel="stylesheet" href="/css/color.css"><meta name="generator" content="Hexo 5.4.2"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/images/dragon_and_knight.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">26</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">14</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> åˆ—è¡¨</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">èˆªã®å°ä¸–ç•Œ</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> åˆ—è¡¨</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">EKF Vs. FGO</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-11-16T06:37:38.000Z" title="Created 2024-11-16 14:37:38">2024-11-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-07-01T07:37:33.710Z" title="Updated 2025-07-01 15:37:33">2025-07-01</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">5.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>21min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="EKF Vs. FGO"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><h1 id="EKF-ä¸-å› å­å›¾-æ ¸å¿ƒæ¦‚å¿µä¸€ä¸€å¯¹åº”è¡¨"><a href="#EKF-ä¸-å› å­å›¾-æ ¸å¿ƒæ¦‚å¿µä¸€ä¸€å¯¹åº”è¡¨" class="headerlink" title="EKF ä¸ å› å­å›¾ æ ¸å¿ƒæ¦‚å¿µä¸€ä¸€å¯¹åº”è¡¨"></a>EKF ä¸ å› å­å›¾ æ ¸å¿ƒæ¦‚å¿µä¸€ä¸€å¯¹åº”è¡¨</h1><div class="table-container">
<table>
<thead>
<tr>
<th><strong>EKF æ¦‚å¿µ</strong></th>
<th><strong>å› å­å›¾ä¸­çš„å¯¹åº”æ¦‚å¿µ</strong></th>
<th><strong>è¯¦ç»†è§£é‡Š</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>çŠ¶æ€å˜é‡ $\mathbf{x}_k$</strong></td>
<td>å›¾ä¸­çš„<strong>èŠ‚ç‚¹</strong>ï¼ˆå˜é‡èŠ‚ç‚¹ $x_k$ï¼‰</td>
<td>èŠ‚ç‚¹è¡¨ç¤ºç³»ç»Ÿåœ¨æ—¶åˆ» $k$ çš„çŠ¶æ€ã€‚ä¸¤è€…ä¸€ä¸€å¯¹åº”ã€‚</td>
</tr>
<tr>
<td><strong>é¢„æµ‹æ¨¡å‹ $f(x_{k-1}, u_k)$</strong></td>
<td><strong>è¿åŠ¨å› å­ï¼ˆMotion Factorï¼‰</strong></td>
<td>ç”¨äºè¿æ¥ $x_{k-1} \rightarrow x_k$ çš„è¾¹ï¼Œæ®‹å·®ä¸º $r_f = x_k - f(x_{k-1}, u_k)$</td>
</tr>
<tr>
<td><strong>è§‚æµ‹æ¨¡å‹ $h(x_k)$</strong></td>
<td><strong>è§‚æµ‹å› å­ï¼ˆMeasurement Factorï¼‰</strong></td>
<td>æ®‹å·®ä¸º $r_h = z_k - h(x_k)$ï¼Œè¡¨ç¤ºè§‚æµ‹ä¸é¢„æµ‹çš„å·®è·</td>
</tr>
<tr>
<td><strong>è¿‡ç¨‹å™ªå£°åæ–¹å·® $\mathbf{Q}_k$</strong></td>
<td><strong>è¿åŠ¨å› å­çš„åæ–¹å·® $\Sigma_f$</strong></td>
<td>ç”¨æ¥åŠ æƒè¿åŠ¨å› å­çš„è¯¯å·®å¤§å°ï¼ˆâ€œæƒ©ç½šâ€å¤§è¯¯å·®ï¼‰</td>
</tr>
<tr>
<td><strong>è§‚æµ‹å™ªå£°åæ–¹å·® $\mathbf{R}_k$</strong></td>
<td><strong>è§‚æµ‹å› å­çš„åæ–¹å·® $\Sigma_h$</strong></td>
<td>ç”¨æ¥åŠ æƒè§‚æµ‹å› å­çš„è¯¯å·®å¤§å°</td>
</tr>
<tr>
<td><strong>åæ–¹å·®ä¼ æ’­</strong></td>
<td><strong>ä¿¡æ¯èåˆå†…éšåœ¨å› å­ä¹‹é—´çš„æ®‹å·®ç»“æ„ä¸­</strong></td>
<td>å› å­å›¾ä¸æ˜¾å¼ä¼ æ’­åæ–¹å·®ï¼Œè€Œæ˜¯é€šè¿‡è”åˆä¼˜åŒ–è‡ªåŠ¨èåˆå¤šæ­¥è¯¯å·®ä¿¡æ¯</td>
</tr>
<tr>
<td><strong>å¡å°”æ›¼å¢ç›Š $K_k$</strong></td>
<td><strong>éšå«åœ¨ä¼˜åŒ–ä¸­åæ–¹å·®åŠ æƒçš„æœ€å°äºŒä¹˜è§£ç»“æ„ä¸­</strong></td>
<td>å› å­å›¾æ²¡æœ‰æ˜ç¡®çš„â€œå¢ç›Šâ€ï¼Œä½†å®ƒé€šè¿‡æ®‹å·®åŠ æƒè‡ªåŠ¨å¾—å‡ºæœ€ä¼˜èåˆå€¼</td>
</tr>
<tr>
<td><strong>çŠ¶æ€æ›´æ–°å…¬å¼</strong></td>
<td><strong>å…¨å±€æœ€å°åŒ–æ®‹å·®å¹³æ–¹å’Œï¼šMAP ä¼°è®¡</strong></td>
<td>çŠ¶æ€æ˜¯ä¼˜åŒ–å˜é‡ï¼Œä¸æ˜¯é€æ­¥æ›´æ–°ï¼›ä¸€æ¬¡æ€§è”åˆä¼˜åŒ–è·å¾—æ‰€æœ‰çŠ¶æ€å˜é‡çš„æœ€ä¼˜å€¼</td>
</tr>
<tr>
<td><strong>åˆå§‹çŠ¶æ€åˆ†å¸ƒï¼ˆå…ˆéªŒï¼‰</strong></td>
<td><strong>å…ˆéªŒå› å­ï¼ˆPrior Factorï¼‰</strong></td>
<td>å¯¹åˆå§‹çŠ¶æ€æ·»åŠ é«˜æ–¯åˆ†å¸ƒå…ˆéªŒï¼Œä¾‹å¦‚ $x_0 \sim \mathcal{N}(\mu_0, P_0)$</td>
</tr>
<tr>
<td><strong>æ®‹å·®ï¼ˆå¦‚ $z_k - h(x_k)$ï¼‰</strong></td>
<td><strong>æ¯ä¸ªå› å­çš„è¯¯å·®å‡½æ•°ï¼ˆResidual functionï¼‰</strong></td>
<td>ç”¨äºæ„å»ºä»£ä»·å‡½æ•°ï¼Œè¡¡é‡æ¨¡å‹é¢„æµ‹ä¸å®é™…ä¹‹é—´çš„è¯¯å·®</td>
</tr>
<tr>
<td><strong>è¯¯å·®åæ–¹å·®åŠ æƒé¡¹ $\Sigma^{-1}$</strong></td>
<td><strong>è¯¯å·®æƒ©ç½šï¼ˆloss penaltyï¼‰ï¼Œæ®‹å·®çš„æƒé‡é¡¹</strong></td>
<td>åœ¨ä¼˜åŒ–ç›®æ ‡å‡½æ•°ä¸­ä½“ç°ä¸ºï¼š$\Vert r \Vert^2_{\Sigma^{-1}} = r^\top \Sigma^{-1} r$</td>
</tr>
<tr>
<td><strong>çŠ¶æ€ä¼°è®¡ä¸ç¡®å®šæ€§ $\mathbf{P}_k$</strong></td>
<td><strong>ä¼˜åŒ–åå¯ç”±æµ·æ£®çŸ©é˜µè¿‘ä¼¼åæ–¹å·®ï¼ˆ$P \approx (H^\top \Sigma^{-1} H)^{-1}$ï¼‰</strong></td>
<td>å› å­å›¾æœ¬èº«ä¸æ˜¾ç¤ºåæ–¹å·®ä¼ æ’­ï¼Œä½†å¯ç”±çº¿æ€§åŒ–åæå–</td>
</tr>
<tr>
<td><strong>é€’å½’æ›´æ–°è¿‡ç¨‹</strong></td>
<td><strong>å¢é‡ä¼˜åŒ–ï¼ˆiSAMï¼‰æˆ–æ‰¹é‡ä¼˜åŒ–ï¼ˆBatch MAPï¼‰</strong></td>
<td>å› å­å›¾å¯ä»¥é€’å½’ä¼˜åŒ–ï¼Œä¹Ÿå¯ä»¥æ‰¹é‡ä¼˜åŒ–ï¼Œæ›´çµæ´»</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h1 id="ä¸¾ä¸ªæ —å­"><a href="#ä¸¾ä¸ªæ —å­" class="headerlink" title="ä¸¾ä¸ªæ —å­"></a>ä¸¾ä¸ªæ —å­</h1><p>é‚£ä¹ˆï¼ŒçŠ¶æ€ä¼°è®¡æ¨¡å‹å¦‚ä½•ä» EKF è½¬ä¸ºå› å­å›¾å‘¢ï¼Ÿä¸¾ä¸ªæ —å­ï¼š<br>å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹ç³»ç»Ÿï¼š</p>
<ul>
<li>çŠ¶æ€ï¼šä½ç½®+é€Ÿåº¦ $x_k = [p_k, v_k]^\top$</li>
<li>æ§åˆ¶è¾“å…¥ï¼šåŠ é€Ÿåº¦ $a_k$</li>
<li>æµ‹é‡ï¼šä½ç½®è§‚æµ‹ $z_k = p_k + \text{noise}$</li>
</ul>
<h2 id="â–¶-EKF-ä¸­çš„æ¨¡å‹ï¼š"><a href="#â–¶-EKF-ä¸­çš„æ¨¡å‹ï¼š" class="headerlink" title="â–¶ EKF ä¸­çš„æ¨¡å‹ï¼š"></a>â–¶ EKF ä¸­çš„æ¨¡å‹ï¼š</h2><ul>
<li>çŠ¶æ€è½¬ç§»ï¼š$\hat{x}_k = f(x_{k-1}, a_k) = \begin{bmatrix} p_{k-1} + v_{k-1} \Delta t + 0.5 a_k \Delta t^2 \ v_{k-1} + a_k \Delta t \end{bmatrix}$</li>
<li>çŠ¶æ€åæ–¹å·®é¢„æµ‹ï¼š$P_k^- = F P_{k-1} F^\top + Q$</li>
<li>è§‚æµ‹æ¨¡å‹ï¼š$z_k = H x_k + \eta_k$ï¼Œå…¶ä¸­ $H = [1, 0]$</li>
</ul>
<hr>
<h2 id="â–¶-å› å­å›¾è¡¨ç¤ºï¼ˆç»Ÿä¸€ä¸ºæœ€å°åŒ–ç›®æ ‡ï¼‰ï¼š"><a href="#â–¶-å› å­å›¾è¡¨ç¤ºï¼ˆç»Ÿä¸€ä¸ºæœ€å°åŒ–ç›®æ ‡ï¼‰ï¼š" class="headerlink" title="â–¶ å› å­å›¾è¡¨ç¤ºï¼ˆç»Ÿä¸€ä¸ºæœ€å°åŒ–ç›®æ ‡ï¼‰ï¼š"></a>â–¶ å› å­å›¾è¡¨ç¤ºï¼ˆç»Ÿä¸€ä¸ºæœ€å°åŒ–ç›®æ ‡ï¼‰ï¼š</h2><h3 id="çŠ¶æ€å˜é‡ï¼š"><a href="#çŠ¶æ€å˜é‡ï¼š" class="headerlink" title="çŠ¶æ€å˜é‡ï¼š"></a>çŠ¶æ€å˜é‡ï¼š</h3><ul>
<li>èŠ‚ç‚¹å˜é‡ï¼š$x_0, x_1, x_2, \dots$</li>
</ul>
<h3 id="1-åˆå§‹å…ˆéªŒå› å­ï¼ˆPrior-Factorï¼‰ï¼š"><a href="#1-åˆå§‹å…ˆéªŒå› å­ï¼ˆPrior-Factorï¼‰ï¼š" class="headerlink" title="1. åˆå§‹å…ˆéªŒå› å­ï¼ˆPrior Factorï¼‰ï¼š"></a>1. åˆå§‹å…ˆéªŒå› å­ï¼ˆPrior Factorï¼‰ï¼š</h3><p>$\text{æ®‹å·®ï¼š } r_0 = x_0 - \mu_0,\quad \Sigma_0 = P_0$</p>
<p>æƒ©ç½šé¡¹ä¸ºï¼š$r_0^\top \Sigma_0^{-1} r_0$</p>
<h3 id="2-è¿åŠ¨å› å­ï¼ˆIMU-å› å­ï¼‰ï¼š"><a href="#2-è¿åŠ¨å› å­ï¼ˆIMU-å› å­ï¼‰ï¼š" class="headerlink" title="2. è¿åŠ¨å› å­ï¼ˆIMU å› å­ï¼‰ï¼š"></a>2. è¿åŠ¨å› å­ï¼ˆIMU å› å­ï¼‰ï¼š</h3><p>$r_{k}^{\text{motion}} = x_k - f(x_{k-1}, a_{k-1})$<br>$\text{æƒ©ç½šé¡¹ï¼š } r_{\text{motion}}^\top Q^{-1} r_{\text{motion}}$</p>
<h3 id="3-è§‚æµ‹å› å­ï¼š"><a href="#3-è§‚æµ‹å› å­ï¼š" class="headerlink" title="3. è§‚æµ‹å› å­ï¼š"></a>3. è§‚æµ‹å› å­ï¼š</h3><p>$kr_k^{\text{obs}} = z_k - h(x_k) = z_k - H x_k$</p>
<p>æƒ©ç½šé¡¹ä¸ºï¼š</p>
<p>Râˆ’1 $robsr_{\text{obs}}^\top R^{-1} r_{\text{obs}}$</p>
<hr>
<h3 id="â–¶-æœ€ç»ˆç›®æ ‡å‡½æ•°ï¼ˆå› å­å›¾ï¼‰ï¼š"><a href="#â–¶-æœ€ç»ˆç›®æ ‡å‡½æ•°ï¼ˆå› å­å›¾ï¼‰ï¼š" class="headerlink" title="â–¶ æœ€ç»ˆç›®æ ‡å‡½æ•°ï¼ˆå› å­å›¾ï¼‰ï¼š"></a>â–¶ æœ€ç»ˆç›®æ ‡å‡½æ•°ï¼ˆå› å­å›¾ï¼‰ï¼š</h3><p>æ•´ä½“ä¼˜åŒ–ç›®æ ‡ä¸ºæœ€å°åŒ–æ‰€æœ‰æ®‹å·®å¹³æ–¹å’Œï¼š</p>
<p>$\min_{x_0, x_1, \dots, x_N} \left[ \underbrace{(x_0 - \mu_0)^\top P_0^{-1} (x_0 - \mu_0)}_{\text{å…ˆéªŒå› å­}} + \sum_{k=1}^{N} \underbrace{(x_k - f(x_{k-1}, a_{k-1}))^\top Q^{-1} (x_k - f(x_{k-1}, a_{k-1}))}_{\text{è¿åŠ¨å› å­}} + \sum_{k=1}^{N} \underbrace{(z_k - H x_k)^\top R^{-1} (z_k - H x_k)}_{\text{è§‚æµ‹å› å­}} \right]$</p>
<hr>
<h1 id="âœ…-æ€»ç»“æ€ç»´å›¾ï¼šEKF-vs-å› å­å›¾-âœ…"><a href="#âœ…-æ€»ç»“æ€ç»´å›¾ï¼šEKF-vs-å› å­å›¾-âœ…" class="headerlink" title="âœ… æ€»ç»“æ€ç»´å›¾ï¼šEKF vs å› å­å›¾ âœ…"></a>âœ… æ€»ç»“æ€ç»´å›¾ï¼šEKF vs å› å­å›¾ âœ…</h1><div class="table-container">
<table>
<thead>
<tr>
<th>EKF</th>
<th>å› å­å›¾</th>
</tr>
</thead>
<tbody>
<tr>
<td>çŠ¶æ€å˜é‡ x_k</td>
<td>å˜é‡èŠ‚ç‚¹ x_k</td>
</tr>
<tr>
<td>é¢„æµ‹å‡½æ•° f(x,u)</td>
<td>è¿åŠ¨å› å­ï¼ˆæ®‹å·®å‡½æ•°ï¼‰</td>
</tr>
<tr>
<td>è§‚æµ‹å‡½æ•° h(x)</td>
<td>è§‚æµ‹å› å­ï¼ˆæ®‹å·®å‡½æ•°ï¼‰</td>
</tr>
<tr>
<td>åæ–¹å·®çŸ©é˜µ P_k</td>
<td>Hessian çš„è¿‘ä¼¼é€†</td>
</tr>
<tr>
<td>è¿‡ç¨‹å™ªå£° Q</td>
<td>è¿åŠ¨å› å­çš„åæ–¹å·®</td>
</tr>
<tr>
<td>è§‚æµ‹å™ªå£° R</td>
<td>è§‚æµ‹å› å­çš„åæ–¹å·®</td>
</tr>
<tr>
<td>åæ–¹å·®ä¼ æ’­</td>
<td>å¤šå› å­è€¦åˆä¼˜åŒ–ï¼Œè‡ªç„¶ä¼ æ’­</td>
</tr>
<tr>
<td>å¡å°”æ›¼å¢ç›Š K</td>
<td>è§£ä¼˜åŒ–é—®é¢˜åçš„éšå«åŠ æƒèåˆ</td>
</tr>
<tr>
<td>çŠ¶æ€æ›´æ–°</td>
<td>ä¸€æ¬¡æ€§æ±‚è§£æœ€å°æ®‹å·®è·¯å¾„ï¼ˆMAPä¼°è®¡ï¼‰</td>
</tr>
</tbody>
</table>
</div>
<h2 id="â€”"><a href="#â€”" class="headerlink" title="â€”-"></a>â€”-</h2><hr>
<h1 id="EKF-ä¸å› å­å›¾çš„å„è¦ç´ æ˜ å°„ï¼ˆæ•°å€¼æ–¹æ³•-æ¦‚ç‡å»ºæ¨¡è§’åº¦ï¼‰"><a href="#EKF-ä¸å› å­å›¾çš„å„è¦ç´ æ˜ å°„ï¼ˆæ•°å€¼æ–¹æ³•-æ¦‚ç‡å»ºæ¨¡è§’åº¦ï¼‰" class="headerlink" title="EKF ä¸å› å­å›¾çš„å„è¦ç´ æ˜ å°„ï¼ˆæ•°å€¼æ–¹æ³• + æ¦‚ç‡å»ºæ¨¡è§’åº¦ï¼‰"></a>EKF ä¸å› å­å›¾çš„å„è¦ç´ æ˜ å°„ï¼ˆæ•°å€¼æ–¹æ³• + æ¦‚ç‡å»ºæ¨¡è§’åº¦ï¼‰</h1><hr>
<h2 id="1-çŠ¶æ€å˜é‡ï¼ˆState-Variableï¼‰"><a href="#1-çŠ¶æ€å˜é‡ï¼ˆState-Variableï¼‰" class="headerlink" title="1. çŠ¶æ€å˜é‡ï¼ˆState Variableï¼‰"></a>1. <strong>çŠ¶æ€å˜é‡ï¼ˆState Variableï¼‰</strong></h2><div class="table-container">
<table>
<thead>
<tr>
<th>EKF</th>
<th>å› å­å›¾</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>çŠ¶æ€å‘é‡ $\mathbf{x}_k$</td>
<td>éšå˜é‡èŠ‚ç‚¹ $x_k$</td>
<td>è¡¨ç¤ºç³»ç»Ÿåœ¨æ—¶åˆ» $k$ çš„çŠ¶æ€ï¼Œä¾‹å¦‚ä½ç½®ã€é€Ÿåº¦ã€å§¿æ€ç­‰ã€‚EKF æ˜¯æ—¶é—´æ­¥é€’æ¨ä¼°è®¡ï¼Œå› å­å›¾åˆ™å°†æ‰€æœ‰æ—¶åˆ»çš„çŠ¶æ€æ˜¾å¼å»ºå›¾ï¼Œä¸€æ¬¡è”åˆä¼˜åŒ–ã€‚</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h2 id="2-åˆå§‹å…ˆéªŒï¼ˆInitial-Priorï¼‰"><a href="#2-åˆå§‹å…ˆéªŒï¼ˆInitial-Priorï¼‰" class="headerlink" title="2. åˆå§‹å…ˆéªŒï¼ˆInitial Priorï¼‰"></a>2. <strong>åˆå§‹å…ˆéªŒï¼ˆInitial Priorï¼‰</strong></h2><div class="table-container">
<table>
<thead>
<tr>
<th>EKF</th>
<th>å› å­å›¾</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>åˆå§‹ä¼°è®¡ï¼š$\mathbf{x}_0 \sim \mathcal{N}(\mu_0, \Sigma_0)$</td>
<td>å…ˆéªŒå› å­ï¼š$\phi_0(x_0) \propto \exp\left( -\frac{1}{2}(x_0 - \mu_0)^T \Sigma_0^{-1} (x_0 - \mu_0) \right)$</td>
<td>EKF ä½¿ç”¨å‡å€¼+åæ–¹å·®åˆå§‹åŒ–ï¼Œå› å­å›¾é€šè¿‡å…ˆéªŒå› å­æ˜¾å¼è¡¨è¾¾åˆå§‹ç½®ä¿¡åº¦ã€‚ä¸¤è€…åœ¨æ¦‚ç‡æ„ä¹‰ä¸‹ç­‰ä»·ã€‚</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h2 id="3-é¢„æµ‹æ¨¡å‹ï¼ˆMotion-Modelï¼‰"><a href="#3-é¢„æµ‹æ¨¡å‹ï¼ˆMotion-Modelï¼‰" class="headerlink" title="3. é¢„æµ‹æ¨¡å‹ï¼ˆMotion Modelï¼‰"></a>3. <strong>é¢„æµ‹æ¨¡å‹ï¼ˆMotion Modelï¼‰</strong></h2><div class="table-container">
<table>
<thead>
<tr>
<th>EKF</th>
<th>å› å­å›¾</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>çŠ¶æ€è½¬ç§»ï¼š$\mathbf{x}_k = f(\mathbf{x}_{k-1}, \mathbf{u}_k) + \mathbf{w}_k$ï¼Œ$\mathbf{w}_k \sim \mathcal{N}(0, Q_k)$</td>
<td>è¿åŠ¨å› å­ï¼š$\phi_k(x_{k-1}, x_k) \propto \exp\left( -\frac{1}{2} \vert x_k - f(x_{k-1}, u_k) \vert^2_{Q_k^{-1}} \right)$</td>
<td>EKF çš„ç³»ç»Ÿæ¨¡å‹é€šè¿‡ $f$ é€’æ¨ï¼Œè¯¯å·®åæ–¹å·®ä¸º $Q_k$ï¼›å› å­å›¾ä¸­æ®‹å·®å³é¢„æµ‹è¯¯å·®ï¼Œåæ–¹å·®æ§åˆ¶æƒ©ç½šå¼ºåº¦ã€‚</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h2 id="4-è§‚æµ‹æ¨¡å‹ï¼ˆMeasurement-Modelï¼‰"><a href="#4-è§‚æµ‹æ¨¡å‹ï¼ˆMeasurement-Modelï¼‰" class="headerlink" title="4. è§‚æµ‹æ¨¡å‹ï¼ˆMeasurement Modelï¼‰"></a>4. <strong>è§‚æµ‹æ¨¡å‹ï¼ˆMeasurement Modelï¼‰</strong></h2><div class="table-container">
<table>
<thead>
<tr>
<th>EKF</th>
<th>å› å­å›¾</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>è§‚æµ‹æ–¹ç¨‹ï¼š$\mathbf{z}_k = h(\mathbf{x}_k) + \mathbf{v}_k$ï¼Œ$\mathbf{v}_k \sim \mathcal{N}(0, R_k)$</td>
<td>è§‚æµ‹å› å­ï¼š$\phi_k^{(z)}(x_k) \propto \exp\left( -\frac{1}{2} \vert z_k - h(x_k) \vert^2_{R_k^{-1}} \right)$</td>
<td>EKF æ¯ä¸€æ­¥ç”¨è§‚æµ‹ä¿®æ­£çŠ¶æ€ï¼Œå› å­å›¾ä¸­ç”¨è§‚æµ‹å› å­è¿æ¥ $x_k$ï¼Œæƒ©ç½šè§‚æµ‹è¯¯å·®ã€‚</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h2 id="5-åæ–¹å·®ä¼ æ’­ä¸å¢ç›Šï¼ˆCovariance-Propagation-amp-Kalman-Gainï¼‰"><a href="#5-åæ–¹å·®ä¼ æ’­ä¸å¢ç›Šï¼ˆCovariance-Propagation-amp-Kalman-Gainï¼‰" class="headerlink" title="5. åæ–¹å·®ä¼ æ’­ä¸å¢ç›Šï¼ˆCovariance Propagation &amp; Kalman Gainï¼‰"></a>5. <strong>åæ–¹å·®ä¼ æ’­ä¸å¢ç›Šï¼ˆCovariance Propagation &amp; Kalman Gainï¼‰</strong></h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">\</th>
<th>EKF æ€è·¯</th>
<th>å› å­å›¾æ€è·¯</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">åæ–¹å·®ä¼ æ’­</td>
<td>æ˜¾å¼ä¼ æ’­ $\mathbf{P}$ï¼Œç”¨äºåç»­åŠ æƒ</td>
<td>éšå¼è¡¨è¾¾ä¸ºæ®‹å·®åŠ æƒé¡¹ $\Sigma^{-1}$ï¼Œå†…åµŒäºä¼˜åŒ–ç»“æ„</td>
</tr>
<tr>
<td style="text-align:left">çŠ¶æ€æ›´æ–°</td>
<td>å½“å‰æ—¶åˆ»é¢„æµ‹å€¼åŠ å¢ç›Šä¿®æ­£</td>
<td>æ‰€æœ‰æ—¶åˆ»çŠ¶æ€åŒæ—¶ä¼˜åŒ–ï¼Œç»Ÿä¸€å¤„ç†å…¨éƒ¨ä¿¡æ¯</td>
</tr>
<tr>
<td style="text-align:left">ä¿¡æ¯èåˆ</td>
<td>å¡å°”æ›¼å¢ç›Šè°ƒèŠ‚è§‚æµ‹ vs é¢„æµ‹çš„æ¯”é‡</td>
<td>æ®‹å·®åæ–¹å·®æ§åˆ¶â€œç½®ä¿¡ç¨‹åº¦â€ï¼Œä¼˜åŒ–ä¸­è‡ªé€‚åº”èåˆ</td>
</tr>
</tbody>
</table>
</div>
<p>åœ¨ EKF ä¸­ï¼Œè¿™éƒ¨åˆ†çš„æ ¸å¿ƒä»»åŠ¡æ˜¯<strong>åœ¨é¢„æµ‹é˜¶æ®µä¼ æ’­ä¸ç¡®å®šæ€§</strong>ï¼Œå¹¶åœ¨è§‚æµ‹åˆ°æ¥æ—¶<strong>åˆ©ç”¨åæ–¹å·®çŸ©é˜µè‡ªé€‚åº”åœ°åŠ æƒè§‚æµ‹å’Œé¢„æµ‹ä¿¡æ¯</strong>ã€‚</p>
<p>ğŸ”¹EKF ä¸­çš„åšæ³•å¦‚ä¸‹ï¼š</p>
<ol>
<li><p><strong>åæ–¹å·®é¢„æµ‹ï¼ˆæ—¶é—´æ›´æ–°ï¼‰</strong><br> å½“çŠ¶æ€ä» $\mathbf{x}_{k-1}$ é¢„æµ‹åˆ° $\mathbf{x}_k$ æ—¶ï¼ŒçŠ¶æ€åæ–¹å·® $\mathbf{P}$ éšä¹‹ä¼ æ’­ï¼š</p>
<p>$\mathbf{P}_{k|k-1} = F_k \mathbf{P}_{k-1|k-1} F_k^\top + Q_k$</p>
<p>å…¶ä¸­ $F_k$ æ˜¯çŠ¶æ€è½¬ç§»å‡½æ•° $f$ å…³äº $x$ çš„é›…å¯æ¯”çŸ©é˜µï¼Œ$Q_k$ æ˜¯è¿‡ç¨‹å™ªå£°åæ–¹å·®ã€‚</p>
</li>
<li><p><strong>è®¡ç®—å¡å°”æ›¼å¢ç›Šï¼ˆä¿¡æ¯èåˆæƒé‡ï¼‰</strong><br> åˆ©ç”¨é¢„æµ‹åæ–¹å·®ä¸è§‚æµ‹å™ªå£°ï¼Œè®¡ç®—æœ€ä¼˜èåˆæƒé‡ï¼š</p>
<p>$\mathbf{K}_k = \mathbf{P}_{k|k-1} H_k^\top (H_k \mathbf{P}_{k|k-1} H_k^\top + R_k)^{-1}$</p>
<p>å…¶ä¸­ $H_k$ æ˜¯è§‚æµ‹å‡½æ•° $h$ å…³äº $x$ çš„é›…å¯æ¯”ï¼Œ$R_k$ æ˜¯è§‚æµ‹å™ªå£°åæ–¹å·®ã€‚</p>
</li>
</ol>
<p>ğŸ”¹å› å­å›¾ä¸­çš„å¯¹åº”æ€æƒ³ï¼š</p>
<p>å› å­å›¾ä¸æ˜¾å¼ä¼ æ’­åæ–¹å·®çŸ©é˜µï¼Œä½†å®ƒé€šè¿‡<strong>æ„å»ºå¸¦åæ–¹å·®æƒé‡çš„æ®‹å·®å› å­</strong>ï¼Œå°†é¢„æµ‹ä¸è§‚æµ‹è¯¯å·®ç»Ÿä¸€ç¼–ç åœ¨ä¼˜åŒ–é—®é¢˜ä¸­ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œå› å­å›¾æ„å»ºäº†å¦‚ä¸‹ä¼˜åŒ–ç›®æ ‡ï¼š</p>
<p>$\min_{x_{0:k}} \sum \left| \underbrace{r_i(x)}_{\text{æ®‹å·®}} \right|^2_{\Sigma_i^{-1}} = \sum r_i^\top \Sigma_i^{-1} r_i$</p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>$\Sigma_i^{-1}$ è¡¨ç¤ºå¯¹åº”è¯¯å·®é¡¹çš„<strong>åŠ æƒçŸ©é˜µï¼ˆå³åæ–¹å·®çš„é€†ï¼‰</strong>ï¼›</li>
<li>å¯¹äºé¢„æµ‹é¡¹ï¼Œå…¶æ®‹å·® $r^{\text{pred}} = x_k - f(x_{k-1}, u_k)$ï¼Œæƒé‡ä¸º $Q_k^{-1}$ï¼›</li>
<li>å¯¹äºè§‚æµ‹é¡¹ï¼Œå…¶æ®‹å·® $r^{\text{obs}} = z_k - h(x_k)$ï¼Œæƒé‡ä¸º $R_k^{-1}$ã€‚</li>
</ul>
<p><strong>è¿™å°±ç›¸å½“äºåœ¨â€œå¢ç›ŠåŠ æƒâ€çš„å±‚é¢ä¸Š</strong>ï¼Œå°† EKF çš„å¡å°”æ›¼å¢ç›Šé€»è¾‘ï¼Œè½¬åŒ–ä¸ºæ®‹å·®æƒ©ç½šä¸­çš„åŠ æƒç­–ç•¥ã€‚åœ¨éçº¿æ€§ä¼˜åŒ–ä¸­ï¼Œè¿™ç§æ®‹å·®çš„åæ–¹å·®åŠ æƒæ­£æ˜¯å½±å“å˜é‡æ›´æ–°æ–¹å‘å’Œå¹…åº¦çš„å…³é”®ï¼Œç›¸å½“äºè‡ªåŠ¨è°ƒèŠ‚â€œç›¸ä¿¡å…ˆéªŒâ€è¿˜æ˜¯â€œç›¸ä¿¡è§‚æµ‹â€ã€‚</p>
<hr>
<h2 id="6-çŠ¶æ€æ›´æ–°ï¼ˆState-Updateï¼‰"><a href="#6-çŠ¶æ€æ›´æ–°ï¼ˆState-Updateï¼‰" class="headerlink" title="6. çŠ¶æ€æ›´æ–°ï¼ˆState Updateï¼‰"></a>6. <strong>çŠ¶æ€æ›´æ–°ï¼ˆState Updateï¼‰</strong></h2><p>ğŸ”¶EKF ä¸­çš„çŠ¶æ€æ›´æ–°æ˜¯é€šè¿‡<strong>ä¸€æ¬¡å¡å°”æ›¼å¢ç›ŠåŠ æƒä¿®æ­£</strong>å®Œæˆçš„ï¼š</p>
<p>$\mathbf{x}_{k|k} = \mathbf{x}_{k|k-1} + \mathbf{K}_k \left( \mathbf{z}_k - h(\mathbf{x}_{k|k-1}) \right)$</p>
<p>è¿™ä¸ªå…¬å¼çš„æœ¬è´¨æ˜¯ï¼š<strong>é¢„æµ‹å€¼ + å¢ç›Š Ã— æ®‹å·®</strong>ï¼Œå³æ ¹æ®è§‚æµ‹ä¸é¢„æµ‹ä¹‹é—´çš„å·®è·ï¼Œå¯¹é¢„æµ‹çŠ¶æ€è¿›è¡ŒåŠ æƒä¿®æ­£ã€‚</p>
<hr>
<p>ğŸ”¶å› å­å›¾æ²¡æœ‰æ˜¾å¼çš„â€œé¢„æµ‹ + æ›´æ–°â€è¿‡ç¨‹ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>å°†æ‰€æœ‰çŠ¶æ€å˜é‡ $x_0, x_1, â€¦, x_k$ ä¸€èµ·å»ºæ¨¡ï¼›</li>
<li>æ‰€æœ‰çš„è¿åŠ¨æ¨¡å‹ã€è§‚æµ‹æ¨¡å‹éƒ½è½¬åŒ–ä¸ºè¯¯å·®æ®‹å·®é¡¹ï¼›</li>
<li>æœ€åé€šè¿‡<strong>éçº¿æ€§æœ€å°äºŒä¹˜ä¼˜åŒ–ï¼ˆå¦‚é«˜æ–¯ç‰›é¡¿æˆ– LM ç®—æ³•ï¼‰</strong>ï¼Œæ±‚è§£ä¸€ç»„æœ€ä¼˜çŠ¶æ€å˜é‡ï¼Œä½¿æ‰€æœ‰æ®‹å·®æ€»å’Œæœ€å°ã€‚</li>
</ul>
<p>å³ï¼š$\hat{x}_{0:k} = \arg\min \sum_i | r_i(x) |^2_{\Sigma_i^{-1}}$</p>
<p>è¿™ç›¸å½“äºä¸€æ¬¡æ€§æ±‚è§£ä¸€ä¸ªå…¨å±€æœ€ä¼˜çŠ¶æ€ä¼°è®¡ï¼Œè€Œä¸æ˜¯é€æ­¥è¿­ä»£æ›´æ–°ã€‚</p>
<hr>
<h2 id="7-æ‰¹é‡-vs-æ»‘åŠ¨çª—å£ï¼ˆæ—¶åºç»“æ„ï¼‰"><a href="#7-æ‰¹é‡-vs-æ»‘åŠ¨çª—å£ï¼ˆæ—¶åºç»“æ„ï¼‰" class="headerlink" title="7. æ‰¹é‡ vs æ»‘åŠ¨çª—å£ï¼ˆæ—¶åºç»“æ„ï¼‰"></a>7. <strong>æ‰¹é‡ vs æ»‘åŠ¨çª—å£ï¼ˆæ—¶åºç»“æ„ï¼‰</strong></h2><div class="table-container">
<table>
<thead>
<tr>
<th>EKF</th>
<th>å› å­å›¾</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>é€’æ¨æ›´æ–°ï¼ˆåªä¿ç•™å½“å‰çŠ¶æ€ï¼‰</td>
<td>æ‰¹é‡å»ºå›¾ï¼Œä¼˜åŒ–å…¨åºåˆ—çŠ¶æ€</td>
<td>EKF æ— æ³•å¤„ç†å›ç¯ç­‰å†å²ä¾èµ–åœºæ™¯ï¼›å› å­å›¾å¯ä»¥å…¨å±€å»ºå›¾ï¼ˆå¦‚ SLAMï¼‰ï¼Œä¹Ÿå¯å±€éƒ¨æ»‘çª—ï¼ˆiSAMï¼‰ã€‚</td>
</tr>
<tr>
<td>ä»…å½“å‰ $\mathbf{x}_k$ æ›´æ–°</td>
<td>æ‰€æœ‰ $x_0, x_1, â€¦, x_k$ å¯æ›´æ–°</td>
<td>å› å­å›¾æ”¯æŒè°ƒæ•´æ•´ä¸ªè½¨è¿¹çš„ä¼°è®¡ï¼Œä¿æŒå…¨å±€ä¸€è‡´æ€§ï¼ŒEKF åˆ™ä»…å½“å‰æœ€ä¼˜ã€‚</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h2 id="8-æ¦‚ç‡å»ºæ¨¡è§†è§’"><a href="#8-æ¦‚ç‡å»ºæ¨¡è§†è§’" class="headerlink" title="8. æ¦‚ç‡å»ºæ¨¡è§†è§’"></a>8. <strong>æ¦‚ç‡å»ºæ¨¡è§†è§’</strong></h2><h3 id="EKF-ç›®æ ‡ï¼š"><a href="#EKF-ç›®æ ‡ï¼š" class="headerlink" title="EKF ç›®æ ‡ï¼š"></a>EKF ç›®æ ‡ï¼š</h3><p>$\text{é€’æ¨ä¼°è®¡ } p(x_k | z_{1:k}, u_{1:k}) \approx \mathcal{N}(\hat{x}_k, P_k)$</p>
<p>å³å¯¹å½“å‰çŠ¶æ€çš„åéªŒè¿›è¡Œé«˜æ–¯è¿‘ä¼¼ã€‚</p>
<hr>
<h3 id="å› å­å›¾ç›®æ ‡ï¼ˆæœ€å¤§åéªŒä¼°è®¡ï¼‰ï¼š"><a href="#å› å­å›¾ç›®æ ‡ï¼ˆæœ€å¤§åéªŒä¼°è®¡ï¼‰ï¼š" class="headerlink" title="å› å­å›¾ç›®æ ‡ï¼ˆæœ€å¤§åéªŒä¼°è®¡ï¼‰ï¼š"></a>å› å­å›¾ç›®æ ‡ï¼ˆæœ€å¤§åéªŒä¼°è®¡ï¼‰ï¼š</h3><p>$\hat{x}_{0:k} = \arg\max_{x_{0:k}} p(x_{0:k} | z_{1:k}, u_{1:k}) = \arg\max_{x_{0:k}} \prod_i \phi_i(x_{\mathcal{S}_i})$</p>
<p>å…¶ä¸­æ¯ä¸ª $\phi_i$ æ˜¯ä¸€ä¸ªå› å­ï¼ˆæ®‹å·®é¡¹ï¼‰ï¼Œå¯¹åº”ä¸åŒçš„ä¿¡æ¯æ¥æºï¼ˆå…ˆéªŒã€è¿åŠ¨æ¨¡å‹ã€è§‚æµ‹æ¨¡å‹ï¼‰ã€‚</p>
<p>ä¼˜åŒ–å½¢å¼ä¸ºï¼š</p>
<p>$\min_{x_{0:k}} \sum_i \underbrace{| r_i |^2_{\Sigma_i^{-1}}}_{\text{æƒ©ç½šé¡¹ï¼ˆè¯¯å·®åŠ æƒï¼‰}}$</p>
<hr>
<h2 id="âœ…-æ€»ç»“å¯¹ç…§è¡¨"><a href="#âœ…-æ€»ç»“å¯¹ç…§è¡¨" class="headerlink" title="âœ… æ€»ç»“å¯¹ç…§è¡¨"></a>âœ… æ€»ç»“å¯¹ç…§è¡¨</h2><div class="table-container">
<table>
<thead>
<tr>
<th><strong>æ¦‚å¿µ</strong></th>
<th><strong>EKF è¡¨è¾¾</strong></th>
<th><strong>å› å­å›¾è¡¨è¾¾</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>çŠ¶æ€å˜é‡</td>
<td>$\mathbf{x}_k$</td>
<td>éšå˜é‡ $x_k$</td>
</tr>
<tr>
<td>åˆå§‹å…ˆéªŒ</td>
<td>$\mathcal{N}(\mu_0, \Sigma_0)$</td>
<td>å…ˆéªŒå› å­ $\phi(x_0)$</td>
</tr>
<tr>
<td>çŠ¶æ€è½¬ç§»æ¨¡å‹</td>
<td>$x_k = f(x_{k-1}, u_k) + w_k$</td>
<td>è¿åŠ¨å› å­ $\phi(x_{k-1}, x_k)$</td>
</tr>
<tr>
<td>è§‚æµ‹æ¨¡å‹</td>
<td>$z_k = h(x_k) + v_k$</td>
<td>è§‚æµ‹å› å­ $\phi(x_k, z_k)$</td>
</tr>
<tr>
<td>è¿‡ç¨‹å™ªå£°</td>
<td>$Q_k$</td>
<td>æƒ©ç½šé¡¹ $\vert x_k - f(x_{k-1}) \vert^2_{Q_k^{-1}}$</td>
</tr>
<tr>
<td>è§‚æµ‹å™ªå£°</td>
<td>$R_k$</td>
<td>æƒ©ç½šé¡¹ $\vert z_k - h(x_k) \vert^2_{R_k^{-1}}$</td>
</tr>
<tr>
<td>åæ–¹å·®ä¼ æ’­</td>
<td>$P_k = F P_{k-1} F^\top + Q$</td>
<td>é€šè¿‡å›¾ç»“æ„è‡ªç„¶èåˆï¼ˆHessiançŸ©é˜µè¿‘ä¼¼åæ–¹å·®ï¼‰</td>
</tr>
<tr>
<td>çŠ¶æ€æ›´æ–°</td>
<td>é¢„æµ‹ + å¢ç›Šä¿®æ­£</td>
<td>å…¨å±€ä¼˜åŒ–çŠ¶æ€èŠ‚ç‚¹</td>
</tr>
<tr>
<td>å¡å°”æ›¼å¢ç›Š</td>
<td>$K_k$</td>
<td>ä¼˜åŒ–ä¸­æ®‹å·®åŠ æƒé¡¹ï¼ˆåæ–¹å·®é€†ï¼‰</td>
</tr>
<tr>
<td>æ®‹å·®æƒ©ç½šé¡¹</td>
<td>$\mathbf{K}_k (\mathbf{z}_k - h(\hat{x}_k))$</td>
<td>$r^\top \Sigma^{-1} r$</td>
</tr>
<tr>
<td>æ»‘åŠ¨çª—å£ç»“æ„</td>
<td>å•çŠ¶æ€å­˜å‚¨ã€ä¸èƒ½å›æº¯</td>
<td>æ”¯æŒå…¨å›¾ä¼˜åŒ–ã€æ»‘çª—ä¼˜åŒ–ã€å›ç¯é‡å®šä½</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h1 id="ä¸¾ä¸ªç²’å­"><a href="#ä¸¾ä¸ªç²’å­" class="headerlink" title="ä¸¾ä¸ªç²’å­"></a>ä¸¾ä¸ªç²’å­</h1><h2 id="ç²’å­â‘ "><a href="#ç²’å­â‘ " class="headerlink" title="ç²’å­â‘ "></a>ç²’å­â‘ </h2><p>ä¸‹é¢é€šè¿‡ä¸€ä¸ª<strong>ç®€æ´æ˜äº†çš„ 1 ç»´è½¨è¿¹ä¼°è®¡é—®é¢˜</strong>ï¼Œæ‰‹æŠŠæ‰‹çš„æ¼”ç¤ºå¦‚ä½•ä» EKF çš„å½¢å¼å‡ºå‘ï¼Œæ„é€ å‡ºå› å­å›¾ç»“æ„ï¼Œå†™å‡ºæ®‹å·®å‡½æ•°å’Œä¼˜åŒ–ç›®æ ‡å‡½æ•°ï¼Œä»¥åŠå…¶ç‰©ç†æ„ä¹‰ã€‚</p>
<hr>
<h1 id="å°æ¡ˆä¾‹ï¼šä¸€ç»´è½¨è¿¹ä¼°è®¡-é«˜æ–¯è§‚æµ‹-å› å­å›¾å»ºæ¨¡"><a href="#å°æ¡ˆä¾‹ï¼šä¸€ç»´è½¨è¿¹ä¼°è®¡-é«˜æ–¯è§‚æµ‹-å› å­å›¾å»ºæ¨¡" class="headerlink" title="å°æ¡ˆä¾‹ï¼šä¸€ç»´è½¨è¿¹ä¼°è®¡ + é«˜æ–¯è§‚æµ‹ + å› å­å›¾å»ºæ¨¡"></a>å°æ¡ˆä¾‹ï¼šä¸€ç»´è½¨è¿¹ä¼°è®¡ + é«˜æ–¯è§‚æµ‹ + å› å­å›¾å»ºæ¨¡</h1><h3 id="ğŸ¯-é—®é¢˜æè¿°ï¼š"><a href="#ğŸ¯-é—®é¢˜æè¿°ï¼š" class="headerlink" title="ğŸ¯ é—®é¢˜æè¿°ï¼š"></a>ğŸ¯ é—®é¢˜æè¿°ï¼š</h3><p>ä¸€è¾†è½¦åœ¨ç›´çº¿è½¨é“ä¸Šè¿åŠ¨ï¼Œä½ç½®ç”¨æ ‡é‡ $x_k$ è¡¨ç¤ºã€‚å‡è®¾å®ƒä»¥ <strong>æ’å®šé€Ÿåº¦ $v$</strong> å‘å‰è¿åŠ¨ï¼Œä½†å—åˆ°è¿‡ç¨‹å™ªå£°å¹²æ‰°ã€‚</p>
<p>æˆ‘ä»¬æœ‰ä¸‰ä¸ªæ—¶é—´ç‚¹çš„è§‚æµ‹ï¼š</p>
<ul>
<li>çŠ¶æ€å˜é‡ï¼š$x_0, x_1, x_2$</li>
<li>æ§åˆ¶è¾“å…¥ï¼šæ’å®šé€Ÿåº¦ $v = 1$</li>
<li>æ—¶é—´é—´éš”: $\Delta t = 1$</li>
<li>æµ‹é‡å€¼ï¼š$z_0 = 0.2, z_1 = 1.1, z_2 = 2.0$</li>
</ul>
<p>æ‰€æœ‰è¿‡ç¨‹å™ªå£° $\mathcal{N}(0, \sigma^2_Q)$ï¼Œæµ‹é‡å™ªå£° $\mathcal{N}(0, \sigma^2_R)$ï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li>$\sigma_Q = 0.1$ï¼ˆè¿‡ç¨‹ä¸ç¡®å®šåº¦å°ï¼‰</li>
<li>$\sigma_R = 0.5$ï¼ˆæµ‹é‡æ›´ä¸å‡†ï¼‰</li>
</ul>
<hr>
<h2 id="ğŸ”¶-1-çŠ¶æ€å˜é‡ä¸å›¾èŠ‚ç‚¹"><a href="#ğŸ”¶-1-çŠ¶æ€å˜é‡ä¸å›¾èŠ‚ç‚¹" class="headerlink" title="ğŸ”¶ 1. çŠ¶æ€å˜é‡ä¸å›¾èŠ‚ç‚¹"></a>ğŸ”¶ 1. çŠ¶æ€å˜é‡ä¸å›¾èŠ‚ç‚¹</h2><p>æˆ‘ä»¬è¦ä¼°è®¡çš„çŠ¶æ€ä¸ºï¼š</p>
<p>$x_0,\ x_1,\ x_2$</p>
<p>å›¾ä¸­ï¼Œæ¯ä¸ªå˜é‡æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x0 â€”â€” x1 â€”â€” x2</span><br><span class="line"> \     |     |</span><br><span class="line">  \    |     |</span><br><span class="line">   z0  z1    z2  ï¼ˆè§‚æµ‹å› å­ï¼‰</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="ğŸ”¶-2-æ„é€ å› å­å›¾çš„å› å­é¡¹ï¼ˆæ®‹å·®é¡¹ï¼‰"><a href="#ğŸ”¶-2-æ„é€ å› å­å›¾çš„å› å­é¡¹ï¼ˆæ®‹å·®é¡¹ï¼‰" class="headerlink" title="ğŸ”¶ 2. æ„é€ å› å­å›¾çš„å› å­é¡¹ï¼ˆæ®‹å·®é¡¹ï¼‰"></a>ğŸ”¶ 2. æ„é€ å› å­å›¾çš„å› å­é¡¹ï¼ˆæ®‹å·®é¡¹ï¼‰</h2><h3 id="ï¼ˆ1ï¼‰å…ˆéªŒå› å­ï¼š-x-0"><a href="#ï¼ˆ1ï¼‰å…ˆéªŒå› å­ï¼š-x-0" class="headerlink" title="ï¼ˆ1ï¼‰å…ˆéªŒå› å­ï¼š$x_0$"></a>ï¼ˆ1ï¼‰å…ˆéªŒå› å­ï¼š$x_0$</h3><p>å‡è®¾æˆ‘ä»¬å¯¹èµ·ç‚¹æœ‰å…ˆéªŒ: $x_0 \sim \mathcal{N}(0, \sigma_0^2)$ï¼Œè®¾ $\sigma_0 = 0.2$</p>
<p>æ®‹å·®å‡½æ•°ä¸ºï¼š$r_0(x_0) = x_0 - 0,\quad \text{ä»£ä»·ï¼š} \frac{1}{\sigma_0^2} (x_0)^2$</p>
<hr>
<h3 id="ï¼ˆ2ï¼‰è¿åŠ¨æ¨¡å‹å› å­ï¼š-x-k-1-rightarrow-x-k"><a href="#ï¼ˆ2ï¼‰è¿åŠ¨æ¨¡å‹å› å­ï¼š-x-k-1-rightarrow-x-k" class="headerlink" title="ï¼ˆ2ï¼‰è¿åŠ¨æ¨¡å‹å› å­ï¼š$x_{k-1} \rightarrow x_k$"></a>ï¼ˆ2ï¼‰è¿åŠ¨æ¨¡å‹å› å­ï¼š$x_{k-1} \rightarrow x_k$</h3><p>å› ä¸ºé€Ÿåº¦æ’å®šï¼ŒçŠ¶æ€è½¬ç§»æ¨¡å‹ä¸ºï¼š$x_k = x_{k-1} + v \cdot \Delta t + w_k,\quad w_k \sim \mathcal{N}(0, \sigma_Q^2)$</p>
<p>æ®‹å·®å‡½æ•°ä¸ºï¼š$r_k^{\text{motion}} = x_k - (x_{k-1} + v)$</p>
<p>ä»£ä»·é¡¹ä¸ºï¼š$\frac{1}{\sigma_Q^2} \left( x_k - x_{k-1} - v \right)^2$</p>
<p>å¯¹äº $x_1$ï¼š$r_1^{\text{motion}} = x_1 - x_0 - 1$</p>
<p>å¯¹äº $x_2$ï¼š$r_2^{\text{motion}} = x_2 - x_1 - 1$</p>
<hr>
<h3 id="ï¼ˆ3ï¼‰è§‚æµ‹å› å­ï¼š-z-k"><a href="#ï¼ˆ3ï¼‰è§‚æµ‹å› å­ï¼š-z-k" class="headerlink" title="ï¼ˆ3ï¼‰è§‚æµ‹å› å­ï¼š$z_k$"></a>ï¼ˆ3ï¼‰è§‚æµ‹å› å­ï¼š$z_k$</h3><p>è§‚æµ‹æ¨¡å‹ä¸ºï¼š$z_k = x_k + v_k,\quad v_k \sim \mathcal{N}(0, \sigma_R^2)$</p>
<p>æ®‹å·®ä¸ºï¼š$r_k^{\text{obs}} = z_k - x_k,\quad \text{ä»£ä»·ï¼š} \frac{1}{\sigma_R^2} (z_k - x_k)^2$</p>
<p>å³ï¼š</p>
<ul>
<li>$r_0^{\text{obs}} = 0.2 - x_0$</li>
<li>$r_1^{\text{obs}} = 1.1 - x_1$</li>
<li>$r_2^{\text{obs}} = 2.0 - x_2$</li>
</ul>
<hr>
<h2 id="ğŸ”¶-3-æ„å»ºæ€»ä¼˜åŒ–ç›®æ ‡å‡½æ•°"><a href="#ğŸ”¶-3-æ„å»ºæ€»ä¼˜åŒ–ç›®æ ‡å‡½æ•°" class="headerlink" title="ğŸ”¶ 3. æ„å»ºæ€»ä¼˜åŒ–ç›®æ ‡å‡½æ•°"></a>ğŸ”¶ 3. æ„å»ºæ€»ä¼˜åŒ–ç›®æ ‡å‡½æ•°</h2><p>æ€»ç›®æ ‡å‡½æ•°ä¸ºæ®‹å·®å¹³æ–¹å’ŒåŠ æƒï¼š</p>
<p>$J(x_0, x_1, x_2) =  \underbrace{\frac{1}{\sigma_0^2} (x_0)^2}_{\text{å…ˆéªŒ}} + \underbrace{\frac{1}{\sigma_Q^2} (x_1 - x_0 - 1)^2}_{\text{è¿åŠ¨}} + \underbrace{\frac{1}{\sigma_Q^2} (x_2 - x_1 - 1)^2}_{\text{è¿åŠ¨}} + \underbrace{\frac{1}{\sigma_R^2} (0.2 - x_0)^2}_{\text{è§‚æµ‹}} + \underbrace{\frac{1}{\sigma_R^2} (1.1 - x_1)^2}_{\text{è§‚æµ‹}} + \underbrace{\frac{1}{\sigma_R^2} (2.0 - x_2)^2}_{\text{è§‚æµ‹}}$</p>
<hr>
<h2 id="ğŸ”¶-4-æ±‚è§£ï¼ˆæ•°å€¼æœ€å°åŒ–ï¼‰"><a href="#ğŸ”¶-4-æ±‚è§£ï¼ˆæ•°å€¼æœ€å°åŒ–ï¼‰" class="headerlink" title="ğŸ”¶ 4. æ±‚è§£ï¼ˆæ•°å€¼æœ€å°åŒ–ï¼‰"></a>ğŸ”¶ 4. æ±‚è§£ï¼ˆæ•°å€¼æœ€å°åŒ–ï¼‰</h2><p>è¿™å°±æ˜¯æ ‡å‡†çš„éçº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜ï¼Œå¯ä»¥ç”¨é«˜æ–¯ç‰›é¡¿æ³•æˆ– LM æ–¹æ³•æ±‚è§£ã€‚ä¼˜åŒ–å˜é‡ä¸ºï¼š</p>
<p>$\mathbf{x} = [x_0,\ x_1,\ x_2]^T$</p>
<p>ä¹Ÿå¯ä»¥ç”¨ Python ä¸­çš„ <code>scipy.optimize.least_squares</code> æˆ– MATLAB çš„ <code>lsqnonlin</code> ç›´æ¥ä¼˜åŒ–ã€‚</p>
<hr>
<div class="table-container">
<table>
<thead>
<tr>
<th>æ­¥éª¤</th>
<th>ç±»å‹</th>
<th>æ®‹å·®å‡½æ•° $r$</th>
<th>æƒé‡ $\Sigma^{-1}$</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>å…ˆéªŒå› å­</td>
<td>$x_0$</td>
<td>$1/\sigma_0^2$</td>
</tr>
<tr>
<td>2</td>
<td>è¿åŠ¨å› å­</td>
<td>$x_k - x_{k-1} - v$</td>
<td>$1/\sigma_Q^2$</td>
</tr>
<tr>
<td>3</td>
<td>è§‚æµ‹å› å­</td>
<td>$z_k - x_k$</td>
<td>$1/\sigma_R^2$</td>
</tr>
</tbody>
</table>
</div>
<p>æœ€ç»ˆé€šè¿‡è”åˆä¼˜åŒ–è¿™äº›æ®‹å·®ï¼Œå°±èƒ½å¾—åˆ°å…¨å±€ä¸€è‡´çš„çŠ¶æ€ä¼°è®¡yeah</p>
<h2 id="MATLAB-å®ç°ï¼šEKF-ä¸å› å­å›¾å¯¹æ¯”"><a href="#MATLAB-å®ç°ï¼šEKF-ä¸å› å­å›¾å¯¹æ¯”" class="headerlink" title="MATLAB å®ç°ï¼šEKF ä¸å› å­å›¾å¯¹æ¯”"></a>MATLAB å®ç°ï¼šEKF ä¸å› å­å›¾å¯¹æ¯”</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factor_graph_vs_ekf_1D</span><span class="params">()</span></span></span><br><span class="line">    clc; clear;close all;</span><br><span class="line"></span><br><span class="line">    <span class="comment">% å‚æ•°è®¾ç½®</span></span><br><span class="line">    v = <span class="number">1.0</span>; dt = <span class="number">1.0</span>;          <span class="comment">% é€Ÿåº¦å’Œæ—¶é—´é—´éš”</span></span><br><span class="line">    sigma_0 = <span class="number">0.2</span>;              <span class="comment">% åˆå§‹çŠ¶æ€ä¸ç¡®å®šæ€§(æ ‡å‡†å·®)</span></span><br><span class="line">    sigma_Q = <span class="number">0.1</span>;              <span class="comment">% è¿‡ç¨‹å™ªå£° std ï¼ˆè¿åŠ¨æ¨¡å‹çš„ä¸ç¡®å®šæ€§ï¼‰</span></span><br><span class="line">    sigma_R = <span class="number">0.5</span>;              <span class="comment">% è§‚æµ‹å™ªå£° std ï¼ˆé‡æµ‹è¯¯å·®ï¼‰</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">% æ ¹æ®çœŸå€¼é€ é‡æµ‹ï¼ˆåŠ å™ªï¼‰</span></span><br><span class="line">    <span class="built_in">true</span>_x = [<span class="number">0</span>; <span class="number">1</span>; <span class="number">2</span>];         <span class="comment">% ç†æƒ³çœŸå®è½¨è¿¹ ï¼ˆåŒ€é€Ÿ1m/så‰è¿›ï¼‰</span></span><br><span class="line">    z = <span class="built_in">true</span>_x + sigma_R * <span class="built_in">randn</span>(<span class="number">3</span>,<span class="number">1</span>);  <span class="comment">% é‡æµ‹   æ¨¡æ‹Ÿé‡æµ‹è¯¯å·®ï¼šæ¯ä¸ªè§‚æµ‹ç‚¹åŠ å…¥é«˜æ–¯å™ªå£° </span></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">    <span class="comment">%======== å› å­å›¾ä¼˜åŒ–è§£ ========%</span></span><br><span class="line">    x0 = [<span class="number">0</span>; <span class="number">0.5</span>; <span class="number">1.8</span>];         <span class="comment">% å…ˆéªŒ ï¼ˆä¸ä¸€å®šå‡†ç¡®ï¼‰</span></span><br><span class="line">    opts = optimoptions(<span class="string">&#x27;lsqnonlin&#x27;</span>, <span class="string">&#x27;Display&#x27;</span>,<span class="string">&#x27;off&#x27;</span>); <span class="comment">% è®¾ç½®ä¼˜åŒ–å™¨å‚æ•°</span></span><br><span class="line">    <span class="comment">% lsqnonlin æ˜¯ MATLAB çš„éçº¿æ€§æœ€å°äºŒä¹˜ä¼˜åŒ–å™¨ï¼Œä¼šæœ€å°åŒ–æ‰€æœ‰æ®‹å·®çš„å¹³æ–¹å’Œï¼š</span></span><br><span class="line">    <span class="comment">% æ®‹å·®ç”± residual_fg å‡½æ•°è¿”å›</span></span><br><span class="line">    x_fg = lsqnonlin(@(x) residual_fg(x, z, v, dt, sigma_0, sigma_Q, sigma_R), x0, [], [], opts); </span><br><span class="line"></span><br><span class="line">    <span class="comment">%======== EKF è§£ ========%</span></span><br><span class="line">    x_ekf = <span class="built_in">zeros</span>(<span class="number">3</span>,<span class="number">1</span>);         <span class="comment">% çŠ¶æ€ä¼°è®¡</span></span><br><span class="line">    P = <span class="built_in">zeros</span>(<span class="number">3</span>,<span class="number">1</span>);             <span class="comment">% åæ–¹å·®</span></span><br><span class="line">    x_ekf(<span class="number">1</span>) = <span class="number">0</span>;               <span class="comment">% åˆå§‹å€¼</span></span><br><span class="line">    P(<span class="number">1</span>) = sigma_0^<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> k = <span class="number">2</span>:<span class="number">3</span></span><br><span class="line">        <span class="comment">% Prediction</span></span><br><span class="line">        x_pred = x_ekf(k<span class="number">-1</span>) + v * dt;       <span class="comment">% ç”¨è¿åŠ¨æ¨¡å‹é¢„æµ‹ä½ç½®</span></span><br><span class="line">        P_pred = P(k<span class="number">-1</span>) + sigma_Q^<span class="number">2</span>;   <span class="comment">% åæ–¹å·®ä¼ æ’­ï¼ˆåŠ è¿‡ç¨‹å™ªå£°ï¼‰</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">% Measurement update</span></span><br><span class="line">        K = P_pred / (P_pred + sigma_R^<span class="number">2</span>);      <span class="comment">% å¡å°”æ›¼å¢ç›Š</span></span><br><span class="line">        x_ekf(k) = x_pred + K * (z(k) - x_pred);   <span class="comment">% çŠ¶æ€æ›´æ–°</span></span><br><span class="line">        P(k) = (<span class="number">1</span> - K) * P_pred;                            <span class="comment">% åæ–¹å·®æ›´æ–°</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">%======== å¯è§†åŒ– ========%</span></span><br><span class="line">    <span class="built_in">figure</span>; <span class="built_in">hold</span> on;</span><br><span class="line">    <span class="built_in">plot</span>(<span class="number">0</span>:<span class="number">2</span>, <span class="built_in">true</span>_x, <span class="string">&#x27;k--o&#x27;</span>, <span class="string">&#x27;DisplayName&#x27;</span>,<span class="string">&#x27;True Trajectory&#x27;</span>);</span><br><span class="line">    <span class="built_in">plot</span>(<span class="number">0</span>:<span class="number">2</span>, z, <span class="string">&#x27;rx&#x27;</span>, <span class="string">&#x27;MarkerSize&#x27;</span>,<span class="number">10</span>, <span class="string">&#x27;DisplayName&#x27;</span>,<span class="string">&#x27;Measurements&#x27;</span>);</span><br><span class="line">    <span class="built_in">plot</span>(<span class="number">0</span>:<span class="number">2</span>, x_fg, <span class="string">&#x27;b-o&#x27;</span>, <span class="string">&#x27;LineWidth&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;DisplayName&#x27;</span>,<span class="string">&#x27;Factor Graph&#x27;</span>);</span><br><span class="line">    <span class="built_in">plot</span>(<span class="number">0</span>:<span class="number">2</span>, x_ekf, <span class="string">&#x27;g--s&#x27;</span>, <span class="string">&#x27;LineWidth&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;DisplayName&#x27;</span>,<span class="string">&#x27;EKF&#x27;</span>);</span><br><span class="line">    <span class="built_in">legend</span>;</span><br><span class="line">    grid on;</span><br><span class="line">    xlabel(<span class="string">&#x27;Time step k&#x27;</span>); ylabel(<span class="string">&#x27;Position&#x27;</span>);</span><br><span class="line">    title(<span class="string">&#x27;1D Trajectory Estimation: EKF vs Factor Graph&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">%======== RMSE è®¡ç®— ========%</span></span><br><span class="line">    rmse_ekf = <span class="built_in">sqrt</span>(<span class="built_in">mean</span>((x_ekf - <span class="built_in">true</span>_x).^<span class="number">2</span>));</span><br><span class="line">    rmse_fgo = <span class="built_in">sqrt</span>(<span class="built_in">mean</span>((x_fg - <span class="built_in">true</span>_x).^<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">%======== RMSE å¯¹æ¯”å›¾ ========%</span></span><br><span class="line">    <span class="built_in">figure</span>;</span><br><span class="line">    bar([rmse_ekf, rmse_fgo]);</span><br><span class="line">    set(gca, <span class="string">&#x27;XTickLabel&#x27;</span>, &#123;<span class="string">&#x27;EKF&#x27;</span>, <span class="string">&#x27;Factor Graph&#x27;</span>&#125;);</span><br><span class="line">    ylabel(<span class="string">&#x27;RMSE&#x27;</span>);</span><br><span class="line">    title(<span class="string">&#x27;RMSE Comparison: EKF vs Factor Graph&#x27;</span>);</span><br><span class="line">    grid on;</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% æ®‹å·®æ„é€ ï¼ˆå› å­å›¾ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">r</span> = <span class="title">residual_fg</span><span class="params">(x, z, v, dt, sigma_0, sigma_Q, sigma_R)</span></span></span><br><span class="line">    <span class="comment">% x = [x0; x1; x2]</span></span><br><span class="line">    r_prior = (x(<span class="number">1</span>) - <span class="number">0</span>) / sigma_0;                        <span class="comment">% åˆå§‹å…ˆéªŒé¡¹ï¼ˆè¶Šåç¦»0æƒ©ç½šè¶Šå¤§ï¼‰  r_0 = \frac&#123;x_0 - \mu_0&#125;&#123;\sigma_0&#125;</span></span><br><span class="line">    r_motion1 = (x(<span class="number">2</span>) - x(<span class="number">1</span>) - v*dt) / sigma_Q;   <span class="comment">% r_1 = \frac&#123;x_1 - x_0 - v \cdot dt&#125;&#123;\sigma_Q&#125;</span></span><br><span class="line">    r_motion2 = (x(<span class="number">3</span>) - x(<span class="number">2</span>) - v*dt) / sigma_Q;   <span class="comment">% r_2 = \frac&#123;x_2 - x_1 - v \cdot dt&#125;&#123;\sigma_Q&#125;</span></span><br><span class="line">    r_obs = (z - x) / sigma_R;                              <span class="comment">% æ‰€æœ‰è§‚æµ‹çš„è¯¯å·®ï¼ˆæ¯ä¸€æ—¶åˆ»è§‚æµ‹ z_k ä¸ä¼°è®¡ x_k çš„å·®ï¼‰r_z = \frac&#123;z_k - x_k&#125;&#123;\sigma_R&#125;</span></span><br><span class="line">    r = [r_prior; r_motion1; r_motion2; r_obs];   <span class="comment">% æ‹¼æ¥æˆä¸€ç»´æ®‹å·®å‘é‡</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="ç²’å­â‘¡"><a href="#ç²’å­â‘¡" class="headerlink" title="ç²’å­â‘¡"></a>ç²’å­â‘¡</h2><p>æ›´è¿›ä¸€æ­¥ï¼š</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line">clc; clear; close all;</span><br><span class="line"></span><br><span class="line"><span class="comment">%% å‚æ•°è®¾ç½®</span></span><br><span class="line">T = <span class="number">100</span>;              <span class="comment">% æ—¶é—´æ­¥æ•°</span></span><br><span class="line">dt = <span class="number">1.0</span>;            <span class="comment">% æ—¶é—´é—´éš”</span></span><br><span class="line">v = <span class="number">1.0</span>;             <span class="comment">% çœŸå®é€Ÿåº¦ï¼ˆæ’å®šï¼‰</span></span><br><span class="line"></span><br><span class="line">Q = <span class="number">0.5</span>^<span class="number">2</span>;           <span class="comment">% è¿‡ç¨‹å™ªå£°æ–¹å·® (è¾ƒå¤§å™ªå£°)</span></span><br><span class="line">R = <span class="number">1.8</span>^<span class="number">2</span>;           <span class="comment">% è§‚æµ‹å™ªå£°æ–¹å·® (è¾ƒå¤§å™ªå£°)</span></span><br><span class="line"></span><br><span class="line">rng(<span class="number">42</span>);             <span class="comment">% å›ºå®šéšæœºç§å­ï¼Œæ–¹ä¾¿å¤ç°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% çœŸå€¼è½¨è¿¹ç”Ÿæˆ (åŒ€é€Ÿè¿åŠ¨ + è¿‡ç¨‹å™ªå£°)</span></span><br><span class="line"><span class="comment">% çŠ¶æ€æ–¹ç¨‹: x_k = x_&#123;k-1&#125; + v*dt + w_k  ï¼ˆè¿åŠ¨æ¨¡å‹ï¼‰</span></span><br><span class="line"><span class="comment">% w_k ~ N(0, Q) - è¿‡ç¨‹å™ªå£° ï¼ˆé›¶å‡å€¼é«˜æ–¯å™ªå£°ï¼‰</span></span><br><span class="line"><span class="comment">% sqrt(Q)*randn ç”Ÿæˆæ ‡å‡†å·®ä¸º sqrt(Q) çš„é«˜æ–¯å™ªå£°</span></span><br><span class="line">x_<span class="built_in">true</span> = <span class="built_in">zeros</span>(T,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span> k = <span class="number">2</span>:T</span><br><span class="line">    x_<span class="built_in">true</span>(k) = x_<span class="built_in">true</span>(k<span class="number">-1</span>) + v*dt + <span class="built_in">sqrt</span>(Q)*<span class="built_in">randn</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% è§‚æµ‹ç”Ÿæˆ (ä»…å¶æ•°æ—¶åˆ»æœ‰è§‚æµ‹ï¼Œ50%ç¼ºå¤±)</span></span><br><span class="line">z = NaN(T,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span> k = <span class="number">1</span>:T</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">mod</span>(k,<span class="number">2</span>)==<span class="number">0</span></span><br><span class="line">        z(k) = x_<span class="built_in">true</span>(k) + <span class="built_in">sqrt</span>(R)*<span class="built_in">randn</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% ==================== EKF å®ç° ====================</span></span><br><span class="line">x_ekf = <span class="built_in">zeros</span>(T,<span class="number">1</span>);      <span class="comment">% çŠ¶æ€ä¼°è®¡</span></span><br><span class="line">P = <span class="number">1000</span>;                   <span class="comment">% åˆå§‹åæ–¹å·® (è¾ƒå¤§ä¸ç¡®å®šæ€§)</span></span><br><span class="line">x_ekf(<span class="number">1</span>) = <span class="number">0</span>;               <span class="comment">% åˆå§‹çŠ¶æ€è®¾ä¸º0 (æ— åˆå§‹è§‚æµ‹) ï¼ˆè®¾ä¸º0ï¼Œä¸å®é™…æœ‰åå·®ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k = <span class="number">2</span>:T</span><br><span class="line">    <span class="comment">% ---é¢„æµ‹---</span></span><br><span class="line">    <span class="comment">% çŠ¶æ€é¢„æµ‹: x_pred = f(x_&#123;k-1&#125;) = x_&#123;k-1&#125; + v*dt</span></span><br><span class="line">    x_pred = x_ekf(k<span class="number">-1</span>) + v*dt; </span><br><span class="line">    <span class="comment">% åæ–¹å·®é¢„æµ‹: P_pred = FÂ·PÂ·F&#x27; + Q  % è¿‡ç¨‹å™ªå£°å¢åŠ ä¸ç¡®å®šæ€§</span></span><br><span class="line">    <span class="comment">% è¿™é‡ŒF=1ï¼ˆä¸€ç»´çº¿æ€§ç³»ç»Ÿï¼‰ï¼Œæ‰€ä»¥ç®€åŒ–ä¸º P_pred = P + Q</span></span><br><span class="line">    P_pred = P + Q; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">% --æ›´æ–°--- </span></span><br><span class="line">    <span class="keyword">if</span> ~<span class="built_in">isnan</span>(z(k)) <span class="comment">% æœ‰è§‚æµ‹æ—¶æ‰§è¡Œæ›´æ–°</span></span><br><span class="line">        <span class="comment">% è®¡ç®—Kalmanå¢ç›Š: K = P_predÂ·H&#x27;Â·(HÂ·P_predÂ·H&#x27; + R)^&#123;-1&#125;</span></span><br><span class="line">        <span class="comment">% è¿™é‡ŒH=1ï¼ˆè§‚æµ‹çŸ©é˜µï¼‰ï¼Œç®€åŒ–ä¸º K = P_pred/(P_pred + R)</span></span><br><span class="line">        K = P_pred / (P_pred + R);  </span><br><span class="line">        <span class="comment">% çŠ¶æ€æ›´æ–°: x = x_pred + KÂ·(z - HÂ·x_pred)</span></span><br><span class="line">        x_ekf(k) = x_pred + K * (z(k) - x_pred);</span><br><span class="line">        <span class="comment">% åæ–¹å·®æ›´æ–°: P = (I - KÂ·H)Â·P_pred</span></span><br><span class="line">        P = (<span class="number">1</span> - K) * P_pred;</span><br><span class="line">    <span class="keyword">else</span> <span class="comment">% æ— è§‚æµ‹æ—¶ä»…é¢„æµ‹</span></span><br><span class="line">        x_ekf(k) = x_pred;</span><br><span class="line">        P = P_pred;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% ==================== FGO å®ç° ====================</span></span><br><span class="line"><span class="comment">% åˆå§‹åŒ–ä¿¡æ¯çŸ©é˜µ(Î›)å’Œä¿¡æ¯å‘é‡(Î·)</span></span><br><span class="line">Lambda = <span class="built_in">zeros</span>(T, T);  <span class="comment">% ä¿¡æ¯çŸ©é˜µ (Hessian)</span></span><br><span class="line">eta = <span class="built_in">zeros</span>(T, <span class="number">1</span>);     <span class="comment">% ä¿¡æ¯å‘é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% æ·»åŠ å¼±å…ˆéªŒå› å­ (é¿å…çŸ©é˜µå¥‡å¼‚)</span></span><br><span class="line">Lambda(<span class="number">1</span>,<span class="number">1</span>) = <span class="number">1</span>/<span class="number">10000</span>; <span class="comment">% å¼±å…ˆéªŒä¿¡æ¯ (æ–¹å·®=10000)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% æ·»åŠ åŠ¨æ€å› å­ (ç›¸é‚»çŠ¶æ€é—´çš„çº¦æŸ)</span></span><br><span class="line"><span class="keyword">for</span> k = <span class="number">2</span>:T</span><br><span class="line">    <span class="comment">% åŠ¨æ€å› å­è¡¨ç¤ºçŠ¶æ€è½¬ç§»çº¦æŸ: x_k = x_&#123;k-1&#125; + v*dt + w_k</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">% ä¿¡æ¯çŸ©é˜µæ›´æ–° (å››å…ƒç´ æ›´æ–°)</span></span><br><span class="line">    <span class="comment">% å¯¹åº”çº¦æŸ: (x_k - x_&#123;k-1&#125; - v*dt)^2 / Q</span></span><br><span class="line">    Lambda(k<span class="number">-1</span>, k<span class="number">-1</span>) = Lambda(k<span class="number">-1</span>, k<span class="number">-1</span>) + <span class="number">1</span>/Q;</span><br><span class="line">    Lambda(k<span class="number">-1</span>, k)   = Lambda(k<span class="number">-1</span>, k)   - <span class="number">1</span>/Q;</span><br><span class="line">    Lambda(k, k<span class="number">-1</span>)   = Lambda(k, k<span class="number">-1</span>)   - <span class="number">1</span>/Q;</span><br><span class="line">    Lambda(k, k)     = Lambda(k, k)     + <span class="number">1</span>/Q;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% ä¿¡æ¯å‘é‡æ›´æ–°</span></span><br><span class="line">    <span class="comment">% å¯¹åº”çº¦æŸä¸­çš„å¸¸æ•°é¡¹: -2*(v*dt)*(x_k - x_&#123;k-1&#125;)/(2Q)</span></span><br><span class="line">    eta(k<span class="number">-1</span>) = eta(k<span class="number">-1</span>) - (v*dt)/Q;</span><br><span class="line">    eta(k)   = eta(k)   + (v*dt)/Q;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% æ·»åŠ è§‚æµ‹å› å­</span></span><br><span class="line"><span class="keyword">for</span> k = <span class="number">1</span>:T</span><br><span class="line">    <span class="keyword">if</span> ~<span class="built_in">isnan</span>(z(k)) <span class="comment">% ä»…åœ¨æœ‰è§‚æµ‹æ—¶æ·»åŠ </span></span><br><span class="line">        <span class="comment">% è§‚æµ‹å› å­: (x_k - z_k)^2 / R</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">% ä¿¡æ¯çŸ©é˜µæ›´æ–°</span></span><br><span class="line">        Lambda(k, k) = Lambda(k, k) + <span class="number">1</span>/R;</span><br><span class="line"></span><br><span class="line">        <span class="comment">% ä¿¡æ¯å‘é‡æ›´æ–°</span></span><br><span class="line">        eta(k) = eta(k) + z(k)/R;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% ------ æ±‚è§£çº¿æ€§ç³»ç»Ÿ ------</span></span><br><span class="line"><span class="comment">% æœ€å¤§åéªŒä¼°è®¡: xÌ‚ = argmin Î£||r_i||^2 = Î›^&#123;-1&#125;Î·</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% ä½¿ç”¨Choleskyåˆ†è§£é«˜æ•ˆæ±‚è§£</span></span><br><span class="line">R_chol = chol(Lambda); <span class="comment">% Choleskyåˆ†è§£: Î› = R&#x27;*R</span></span><br><span class="line">x_fgo = R_chol \ (R_chol&#x27; \ eta); <span class="comment">% æ±‚è§£çº¿æ€§ç³»ç»Ÿ: R&#x27;*R*x = Î·</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% ==================== æ€§èƒ½è¯„ä¼° ====================</span></span><br><span class="line"><span class="comment">% è®¡ç®—RMSE</span></span><br><span class="line">ekf_error = x_<span class="built_in">true</span> - x_ekf;</span><br><span class="line">fgo_error = x_<span class="built_in">true</span> - x_fgo;</span><br><span class="line"></span><br><span class="line">rmse_ekf = <span class="built_in">sqrt</span>(<span class="built_in">mean</span>(ekf_error.^<span class="number">2</span>));</span><br><span class="line">rmse_fgo = <span class="built_in">sqrt</span>(<span class="built_in">mean</span>(fgo_error.^<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">% è®¡ç®—å¹³å‡è¯¯å·®</span></span><br><span class="line">mean_ekf = <span class="built_in">mean</span>(<span class="built_in">abs</span>(ekf_error));</span><br><span class="line">mean_fgo = <span class="built_in">mean</span>(<span class="built_in">abs</span>(fgo_error));</span><br><span class="line"></span><br><span class="line">fprintf(<span class="string">&#x27;============ æ€§èƒ½å¯¹æ¯” ============\n&#x27;</span>);</span><br><span class="line">fprintf(<span class="string">&#x27;EKF å‡æ–¹æ ¹è¯¯å·®(RMSE): %.4f\n&#x27;</span>, rmse_ekf);</span><br><span class="line">fprintf(<span class="string">&#x27;FGO å‡æ–¹æ ¹è¯¯å·®(RMSE): %.4f\n&#x27;</span>, rmse_fgo);</span><br><span class="line">fprintf(<span class="string">&#x27;EKF å¹³å‡ç»å¯¹è¯¯å·®: %.4f\n&#x27;</span>, mean_ekf);</span><br><span class="line">fprintf(<span class="string">&#x27;FGO å¹³å‡ç»å¯¹è¯¯å·®: %.4f\n&#x27;</span>, mean_fgo);</span><br><span class="line">fprintf(<span class="string">&#x27;FGOç²¾åº¦æå‡: %.2f%%\n&#x27;</span>, (rmse_ekf - rmse_fgo)/rmse_ekf*<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">%% ==================== ç»˜å›¾å¯¹æ¯” ====================</span></span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;Position&#x27;</span>, [<span class="number">100</span>, <span class="number">100</span>, <span class="number">1200</span>, <span class="number">600</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">% è½¨è¿¹å¯¹æ¯”</span></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">plot</span>(<span class="number">1</span>:T, x_<span class="built_in">true</span>, <span class="string">&#x27;-k&#x27;</span>, <span class="string">&#x27;LineWidth&#x27;</span>, <span class="number">2</span>); <span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>(<span class="number">1</span>:T, x_ekf, <span class="string">&#x27;--b&#x27;</span>, <span class="string">&#x27;LineWidth&#x27;</span>, <span class="number">1.5</span>);</span><br><span class="line"><span class="built_in">plot</span>(<span class="number">1</span>:T, x_fgo, <span class="string">&#x27;-.r&#x27;</span>, <span class="string">&#x27;LineWidth&#x27;</span>, <span class="number">1.5</span>);</span><br><span class="line"><span class="built_in">scatter</span>(<span class="built_in">find</span>(~<span class="built_in">isnan</span>(z)), z(~<span class="built_in">isnan</span>(z)), <span class="number">70</span>, <span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;filled&#x27;</span>, <span class="string">&#x27;MarkerEdgeColor&#x27;</span>, <span class="string">&#x27;k&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;è½¨è¿¹ä¼°è®¡å¯¹æ¯”&#x27;</span>);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;çœŸå®è½¨è¿¹&#x27;</span>, <span class="string">&#x27;EKFä¼°è®¡&#x27;</span>, <span class="string">&#x27;FGOä¼°è®¡&#x27;</span>, <span class="string">&#x27;è§‚æµ‹ç‚¹&#x27;</span>, <span class="string">&#x27;Location&#x27;</span>, <span class="string">&#x27;northwest&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;æ—¶é—´æ­¥&#x27;</span>); ylabel(<span class="string">&#x27;ä½ç½®&#x27;</span>);</span><br><span class="line">grid on;</span><br><span class="line">set(gca, <span class="string">&#x27;FontSize&#x27;</span>, <span class="number">12</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">% è¯¯å·®å¯¹æ¯”</span></span><br><span class="line">subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"><span class="built_in">plot</span>(<span class="number">1</span>:T, <span class="built_in">abs</span>(ekf_error), <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;LineWidth&#x27;</span>, <span class="number">1.5</span>); <span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>(<span class="number">1</span>:T, <span class="built_in">abs</span>(fgo_error), <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;LineWidth&#x27;</span>, <span class="number">1.5</span>);</span><br><span class="line">title(<span class="string">&#x27;ä¼°è®¡è¯¯å·®ç»å¯¹å€¼&#x27;</span>);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;EKFè¯¯å·®&#x27;</span>, <span class="string">&#x27;FGOè¯¯å·®&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;æ—¶é—´æ­¥&#x27;</span>); ylabel(<span class="string">&#x27;ä½ç½®è¯¯å·®&#x27;</span>);</span><br><span class="line">grid on;</span><br><span class="line">set(gca, <span class="string">&#x27;FontSize&#x27;</span>, <span class="number">12</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">% æ ‡æ³¨æ€§èƒ½æŒ‡æ ‡</span></span><br><span class="line">annotation(<span class="string">&#x27;textbox&#x27;</span>, [<span class="number">0.15</span>, <span class="number">0.25</span>, <span class="number">0.2</span>, <span class="number">0.1</span>], <span class="string">&#x27;String&#x27;</span>, ...</span><br><span class="line">    sprintf(<span class="string">&#x27;EKF RMSE: %.4f\nFGO RMSE: %.4f&#x27;</span>, rmse_ekf, rmse_fgo), ...</span><br><span class="line">    <span class="string">&#x27;FitBoxToText&#x27;</span>, <span class="string">&#x27;on&#x27;</span>, <span class="string">&#x27;BackgroundColor&#x27;</span>, <span class="string">&#x27;white&#x27;</span>, <span class="string">&#x27;FontSize&#x27;</span>, <span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://kausiujik.github.io/2022/09/29/Bayes_Lec4.2/">ä¸€èˆ¬æŸå¤±å‡½æ•°ä¸‹çš„è´å¶æ–¯è§£</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://wild-civil.github.io">Civil</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://wild-civil.github.io/post/5b8c8a6e.html">https://wild-civil.github.io/post/5b8c8a6e.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/XKF/">XKF</a></div><div class="post_share"><div class="social-share" data-image="https://youpai.hanvon.top/blog/article/Navigation/XKF/UKF/UKF%20vs.%20EKF%20illustration.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> Donate</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://youpai.hanvon.top/blog/background/donate/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="https://youpai.hanvon.top/blog/background/donate/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://youpai.hanvon.top/blog/background/donate/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="https://youpai.hanvon.top/blog/background/donate/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/e0c82c88.html"><img class="prev-cover" src="https://youpai.hanvon.top/blog/FnL/us.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">è‰¾é¡½çŸ³çš„é˜¿æ‹‰è•¾</div></div></a></div><div class="next-post pull-right"><a href="/post/12bc0cb8.html"><img class="next-cover" src="https://youpai.hanvon.top/blog/article/Learing/FG/IMU_PRE/imu_pre_2.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">IMUé¢„ç§¯åˆ†</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/post/b654ab75.html" title="å¡å°”æ›¼æ»¤æ³¢"><img class="cover" src="https://youpai.hanvon.top/blog/cover/kalman_cover.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-07</div><div class="title">å¡å°”æ›¼æ»¤æ³¢</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/images/dragon_and_knight.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Civil</div><div class="author-info__description">å¯ä»¥å¹³å‡¡ä½†ä¸èƒ½å¹³åº¸</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">26</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">14</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/wild-civil"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/wild-civil" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:f473112889@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://fontawesome.com/icons" target="_blank" title="Icon Font"><i class="fa-solid fa-cubes"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">ä¸‡é€šç­‹éª¨è´´ ç—›äº†æ¥ä¸€è´´</div><span id="stayTiming"></span><br/><span id="activeTiming"> </span><br/><span id="warning"> </span></div><div class="card-widget couple-widget" id="love_timer"><div class="item-headline"><i></i><span></span></div><div class="item-content"><!DOCTYPE html>
  <html>
    <head>
      <meta charset="utf-8">
      <title></title>
      <style>
        .icon {
            width: 1em;
            height: 1em;
            vertical-align: middle;
            fill: currentColor;
            overflow: hidden;
        }

        /* è®¾ç½®æ ‡é¢˜çš„å­—ä½“å¤§å°å’Œå…¶ä»–æ ·å¼ */
        .couple-title {
          font-size: 1.2rem; /* ä¿®æ”¹ä¸ºåˆé€‚çš„å­—ä½“å¤§å° */
          # font-weight: bold; /* å¦‚æœéœ€è¦æ›´ç²—çš„å­—ä½“å¯ä»¥ä½¿ç”¨ */
          color: #333; /* æ ¹æ®ä½ çš„è®¾è®¡éœ€æ±‚è°ƒæ•´é¢œè‰² */
          text-align: center; /* ç¡®ä¿æ ‡é¢˜å±…ä¸­ */
          margin-bottom: 20px; /* å»æ‰å¤šä½™çš„å¤–è¾¹è· */
        }
        
        @media screen and (max-width: 576px)  {
        
            .nav-search-btn {
                right: 0!important;
            }
        }
        .couple {
            text-align: center;
        }
        
        .info .pic,.couple .pic {
            border-radius: 50%;
            width: 5rem;
            background: #fff;
            padding: 2px;
        }
        
        .couple-love {
            width: 35px;
            margin: 20px 0;
            animation: heartbeat 1.33s ease-in-out infinite;
        }
        
        @keyframes heartbeat {
            0% {
                -webkit-transform: scale(1);
                transform: scale(1)
            }
            50% {
                -webkit-transform: scale(.8);
                transform: scale(.8)
            }
            to {
                -webkit-transform: scale(1);
                transform: scale(1)
            }
        }
        #our-company {
            text-align: center;
          font-size: 1.1rem;
        /*    color: #7d7474;
            background: aliceblue; */
            width: 100%;
            border-radius: 4px;
            padding: 0.5rem 0;
            user-select: none;
        }
        #our-company span {
            margin: 0 .25rem;
            vertical-align: middle;
        }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="row">
          <div class="col-12 col-md-3 position-relative right d-none d-md-block">
            <div class="sidebar-box couple"> 
              <!-- æ ‡é¢˜éƒ¨åˆ† -->
              <div class="couple-title">
                  ----- è‰¾é¡½çŸ³ â¤ï¸ é˜¿æ‹‰è•¾ -----
              </div>
              <img class="pic" src="https://youpai.hanvon.top/blog/FnL/L.png" alt="LSS"> <img
              class="couple-love" src="https://youpai.hanvon.top/blog/FnL/love-removebg-preview.png" alt="çˆ±å¿ƒ"> <img class="pic" src="https://youpai.hanvon.top/blog/FnL/F.png"
              alt="FHH">
              <div id="our-company" data-start="2020-12-04"></div>
            </div>
          </div>
        </div>
      </div>
      <script src="/js/haiyong/lanstarApp.js"></script>
      <script src="/js/haiyong/icon.js"></script>
      <script>
        lanstar.init();
      </script>
      <script>
        lanstar.addCoupleTime();
      </script>
    </body>
  </html>
</div></div><div class="card-widget moment-widget" id="moment_timer"><div class="item-headline"><i class="fa-solid fa-fan"></i><span>è½¬çœ¼ä¹‹é—´</span></div><div class="item-content"><html>
  <head></head>
  <body>
    <div class="widget_text zib-widget widget_custom_html">
      <div class="textwidget custom-html-widget">
        <style type="text/css">
          .time-schedule-main {
            border-radius: 8px;
            display: flex;
            justify-content: space-evenly;
            align-items: center;
          }
          .today-schedule,
          .toweek-schedule,
          .tomonth-schedule,
          .toyear-schedule {
            display: inline-block;
            width: 50px;
            height: 100px;
            background-color: white;
            border: 1px solid #eee;
            border-radius: 99px;
          }
          .wiiuii-schedule-item {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 99px;
          }
          .today-item,
          .toweek-item,
          .tomonth-item,
          .toyear-item {
            position: absolute;
            width: 100%;
            height: 109%;
            bottom: 0;
            transition: all 1s;
          }
          .schedule-info {
            display: flex;
            color: #333;
            position: absolute;
            margin: auto;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            flex-direction: column;
            align-items: center;
            justify-content: center;
          }
          .schedule-tilte {
            font-size: 12px;
            font-weight: 700;
          }
          .time-schedule-main img {
            background-repeat: no-repeat;
            background-color: rgba(0, 0, 0, 0); /* é€æ˜åº¦çš„é»‘è‰² */
            max-width: unset !important;
            max-height: unset !important;
            width: 200px;
            height: 10px;  /* æ³¢æµªé«˜ä½ */
            top: 0;
            left: 0;
            position: absolute;
            animation: wiiuii_move_wave 2s linear infinite;
            -webkit-animation: wiiuii_move_wave 2s linear infinite;
          }


          [data-theme="dark"] .time-schedule-main img {
            background-color: rgba(255, 255, 255, 0); /* é€æ˜åº¦çš„ç™½è‰² */
            # background-color: transparent; /* ä½¿ç”¨é€æ˜èƒŒæ™¯ */
            filter: none !important; /* ç§»é™¤æ»¤é•œæ•ˆæœ */
            # opacity: 1 !important;   /* æ¢å¤åŸå§‹é€æ˜åº¦ */
          }

          @-webkit-keyframes wiiuii_move_wave {
            0% { -webkit-transform: translateX(0); }
            50% { -webkit-transform: translateX(-25%); }
            100% { -webkit-transform: translateX(-50%); }
          }
          @keyframes wiiuii_move_wave {
            0% { transform: translateX(0); }
            50% { transform: translateX(-25%); }
            100% { transform: translateX(-50%); }
          }

          /* ä»Šæ—¥å‰©ä½™èƒŒæ™¯é¢œè‰² - é»„ç»¿è‰²åˆ°æŸ”å’Œæ©™è‰² (ç”Ÿæœºé£æ ¼)*/
          .today-item {
            background-image: linear-gradient(to right, #dcedc1, #ffcc80);
          }
          /* æœ¬å‘¨å‰©ä½™èƒŒæ™¯é¢œè‰² - æŸ”å’Œç²‰è‰²åˆ°æ·¡ç´«è‰² (æ¸©æš–é£æ ¼) */
          .toweek-item {
            background-image: linear-gradient(to right, #fbb4ae, #d3b5e5);
          }
          /* æœ¬æœˆå‰©ä½™èƒŒæ™¯é¢œè‰² - æµ…è“åˆ°é’ç»¿è‰² (è‡ªç„¶é£æ ¼)  */
          .tomonth-item {
            
            background-image: linear-gradient(to right, #a0e9ff, #69d1c5);
          }
          /* ä»Šå¹´å‰©ä½™èƒŒæ™¯é¢œè‰² - æ·±è“åˆ°æ·¡è“è‰² (å®é™é£æ ¼) */
          .toyear-item {
            background-image: linear-gradient(to right, #4a90e2, #b3cde0);
          }
        </style>

        <div class="time-schedule-main">
          <div class="today-schedule">
            <div class="wiiuii-schedule-item">
              <div class="today-item" style="height: 66%;">
                <img src="https://youpai.hanvon.top/blog/background/wave.png">
              </div>
              <div class="schedule-info">
                <span class="schedule-tilte">ä»Šæ—¥å‰©ä½™</span>
                <span class="today-num">80%</span>
              </div>
            </div>
          </div>
          <div class="toweek-schedule">
            <div class="wiiuii-schedule-item">
              <div class="toweek-item" style="height: 20.6%;">
                <img src="https://youpai.hanvon.top/blog/background/wave.png">
              </div>
              <div class="schedule-info">
                <span class="schedule-tilte">æœ¬å‘¨å‰©ä½™</span>
                <span class="toweek-num">20.6%</span>
              </div>
            </div>
          </div>
          <div class="tomonth-schedule">
            <div class="wiiuii-schedule-item">
              <div class="tomonth-item" style="height: 74.8%;">
                <img src="https://s4.ax1x.com/2022/02/06/HuOUv6.png">
              </div>
              <div class="schedule-info">
                <span class="schedule-tilte">æœ¬æœˆå‰©ä½™</span>
                <span class="tomonth-num">74.8%</span>
              </div>
            </div>
          </div>
          <div class="toyear-schedule">
            <div class="wiiuii-schedule-item">
              <div class="toyear-item" style="height: 14.6%;">
                <img src="https://s4.ax1x.com/2022/02/06/HuOUv6.png">
              </div>
              <div class="schedule-info">
                <span class="schedule-tilte">æœ¬å¹´å‰©ä½™</span>
                <span class="toyear-num">14.6%</span>
              </div>
            </div>
          </div>
        </div>

        <script type="text/javascript">
          function calculatePercentage(current, total) {
            return ((total - current) / total * 100).toFixed(1);
          }

          function setTimeSchedule() {
            const now = new Date();

            // ä»Šæ—¥å‰©ä½™ç™¾åˆ†æ¯”
            const totalSecondsToday = 24 * 3600;
            const currentSecondsToday = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
            const todayPercentage = calculatePercentage(currentSecondsToday, totalSecondsToday);
            document.querySelector('.today-num').innerText = todayPercentage + "%";
            document.querySelector('.today-item').style.height = todayPercentage + "%";

            // æœ¬å‘¨å‰©ä½™ç™¾åˆ†æ¯”
            //const totalSecondsWeek = 7 * 24 * 3600;
            //const currentSecondsWeek = (now.getDay() * 24 * 3600) + currentSecondsToday;
            //const weekPercentage = calculatePercentage(currentSecondsWeek, totalSecondsWeek);
            //document.querySelector('.toweek-num').innerText = weekPercentage + "%";
            //document.querySelector('.toweek-item').style.height = weekPercentage + "%";

            // æœ¬å‘¨å‰©ä½™ç™¾åˆ†æ¯”
            const totalSecondsWeek = 7 * 24 * 3600;
            const currentDayOfWeek = (now.getDay() === 0) ? 6 : now.getDay() - 1; // å°† Sunday (0) å˜ä¸º 6ï¼Œå…¶ä»–æ—¥æœŸå‡å» 1
            const currentSecondsWeek = (currentDayOfWeek * 24 * 3600) + currentSecondsToday;
            const weekPercentage = calculatePercentage(currentSecondsWeek, totalSecondsWeek);
            document.querySelector('.toweek-num').innerText = weekPercentage + "%";
            document.querySelector('.toweek-item').style.height = weekPercentage + "%";

            //const totalSecondsWeek = 7 * 24 * 3600;
            //let currentDay = now.getDay();
            //currentDay = (currentDay === 0) ? 7 : currentDay; // å¦‚æœæ˜¯æ˜ŸæœŸå¤©ï¼Œå°†å…¶è½¬æ¢ä¸º7
            //const currentSecondsWeek = (currentDay - 1) * 24 * 3600 + currentSecondsToday; // ä»¥å‘¨ä¸€ä¸ºæ¯å‘¨çš„ç¬¬ä¸€å¤©
            //const weekPercentage = calculatePercentage(currentSecondsWeek, totalSecondsWeek);
            //document.querySelector('.toweek-num').innerText = weekPercentage + "%";
            //document.querySelector('.toweek-item').style.height = weekPercentage + "%";





            // æœ¬æœˆå‰©ä½™ç™¾åˆ†æ¯”
            const totalDaysInMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();
            const totalSecondsMonth = totalDaysInMonth * 24 * 3600;
            const currentSecondsMonth = ((now.getDate() - 1) * 24 * 3600) + currentSecondsToday;
            const monthPercentage = calculatePercentage(currentSecondsMonth, totalSecondsMonth);
            document.querySelector('.tomonth-num').innerText = monthPercentage + "%";
            document.querySelector('.tomonth-item').style.height = monthPercentage + "%";

            // æœ¬å¹´å‰©ä½™ç™¾åˆ†æ¯”
            const startOfYear = new Date(now.getFullYear(), 0, 1);
            const endOfYear = new Date(now.getFullYear() + 1, 0, 1);
            const totalSecondsYear = Math.round((endOfYear - startOfYear) / 1000);
            const currentSecondsYear = Math.round((now - startOfYear) / 1000);
            const yearPercentage = calculatePercentage(currentSecondsYear, totalSecondsYear);
            document.querySelector('.toyear-num').innerText = yearPercentage + "%";
            document.querySelector('.toyear-item').style.height = yearPercentage + "%";
          }

          // æ¯éš”1ç§’æ›´æ–°ä¸€æ¬¡
          setInterval(setTimeSchedule, 1000);
          // åˆå§‹åŒ–
          setTimeSchedule();
        </script>

        <div class="google-auto-placed" style="width: 100%; height: auto; clear: none; text-align: center;">
          <ins class="adsbygoogle adsbygoogle-noablate" style="display: block; margin: 10px auto; background-color: transparent; height: 6px;" data-ad-client="ca-pub-7056167681359419" data-ad-format="auto" data-adsbygoogle-status="done">
            <div id="aswift_4_host" style="border: none; height: 600px; width: 281px; margin: 0; padding: 0; position: relative; visibility: visible; background-color: transparent; display: inline-block;"></div>
          </ins>
        </div>
      </div>
    </div>
  </body>
  </html>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#EKF-%E4%B8%8E-%E5%9B%A0%E5%AD%90%E5%9B%BE-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E4%B8%80%E4%B8%80%E5%AF%B9%E5%BA%94%E8%A1%A8"><span class="toc-number">1.</span> <span class="toc-text">EKF ä¸ å› å­å›¾ æ ¸å¿ƒæ¦‚å¿µä¸€ä¸€å¯¹åº”è¡¨</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BE%E4%B8%AA%E6%A0%97%E5%AD%90"><span class="toc-number">2.</span> <span class="toc-text">ä¸¾ä¸ªæ —å­</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%B6-EKF-%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9E%8B%EF%BC%9A"><span class="toc-number">2.1.</span> <span class="toc-text">â–¶ EKF ä¸­çš„æ¨¡å‹ï¼š</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%96%B6-%E5%9B%A0%E5%AD%90%E5%9B%BE%E8%A1%A8%E7%A4%BA%EF%BC%88%E7%BB%9F%E4%B8%80%E4%B8%BA%E6%9C%80%E5%B0%8F%E5%8C%96%E7%9B%AE%E6%A0%87%EF%BC%89%EF%BC%9A"><span class="toc-number">2.2.</span> <span class="toc-text">â–¶ å› å­å›¾è¡¨ç¤ºï¼ˆç»Ÿä¸€ä¸ºæœ€å°åŒ–ç›®æ ‡ï¼‰ï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E5%8F%98%E9%87%8F%EF%BC%9A"><span class="toc-number">2.2.1.</span> <span class="toc-text">çŠ¶æ€å˜é‡ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9D%E5%A7%8B%E5%85%88%E9%AA%8C%E5%9B%A0%E5%AD%90%EF%BC%88Prior-Factor%EF%BC%89%EF%BC%9A"><span class="toc-number">2.2.2.</span> <span class="toc-text">1. åˆå§‹å…ˆéªŒå› å­ï¼ˆPrior Factorï¼‰ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%BF%90%E5%8A%A8%E5%9B%A0%E5%AD%90%EF%BC%88IMU-%E5%9B%A0%E5%AD%90%EF%BC%89%EF%BC%9A"><span class="toc-number">2.2.3.</span> <span class="toc-text">2. è¿åŠ¨å› å­ï¼ˆIMU å› å­ï¼‰ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%A7%82%E6%B5%8B%E5%9B%A0%E5%AD%90%EF%BC%9A"><span class="toc-number">2.2.4.</span> <span class="toc-text">3. è§‚æµ‹å› å­ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%96%B6-%E6%9C%80%E7%BB%88%E7%9B%AE%E6%A0%87%E5%87%BD%E6%95%B0%EF%BC%88%E5%9B%A0%E5%AD%90%E5%9B%BE%EF%BC%89%EF%BC%9A"><span class="toc-number">2.2.5.</span> <span class="toc-text">â–¶ æœ€ç»ˆç›®æ ‡å‡½æ•°ï¼ˆå› å­å›¾ï¼‰ï¼š</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%9C%85-%E6%80%BB%E7%BB%93%E6%80%9D%E7%BB%B4%E5%9B%BE%EF%BC%9AEKF-vs-%E5%9B%A0%E5%AD%90%E5%9B%BE-%E2%9C%85"><span class="toc-number">3.</span> <span class="toc-text">âœ… æ€»ç»“æ€ç»´å›¾ï¼šEKF vs å› å­å›¾ âœ…</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%80%94"><span class="toc-number">3.1.</span> <span class="toc-text">â€”-</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#EKF-%E4%B8%8E%E5%9B%A0%E5%AD%90%E5%9B%BE%E7%9A%84%E5%90%84%E8%A6%81%E7%B4%A0%E6%98%A0%E5%B0%84%EF%BC%88%E6%95%B0%E5%80%BC%E6%96%B9%E6%B3%95-%E6%A6%82%E7%8E%87%E5%BB%BA%E6%A8%A1%E8%A7%92%E5%BA%A6%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">EKF ä¸å› å­å›¾çš„å„è¦ç´ æ˜ å°„ï¼ˆæ•°å€¼æ–¹æ³• + æ¦‚ç‡å»ºæ¨¡è§’åº¦ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%8A%B6%E6%80%81%E5%8F%98%E9%87%8F%EF%BC%88State-Variable%EF%BC%89"><span class="toc-number">4.1.</span> <span class="toc-text">1. çŠ¶æ€å˜é‡ï¼ˆState Variableï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%88%9D%E5%A7%8B%E5%85%88%E9%AA%8C%EF%BC%88Initial-Prior%EF%BC%89"><span class="toc-number">4.2.</span> <span class="toc-text">2. åˆå§‹å…ˆéªŒï¼ˆInitial Priorï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%A2%84%E6%B5%8B%E6%A8%A1%E5%9E%8B%EF%BC%88Motion-Model%EF%BC%89"><span class="toc-number">4.3.</span> <span class="toc-text">3. é¢„æµ‹æ¨¡å‹ï¼ˆMotion Modelï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%A7%82%E6%B5%8B%E6%A8%A1%E5%9E%8B%EF%BC%88Measurement-Model%EF%BC%89"><span class="toc-number">4.4.</span> <span class="toc-text">4. è§‚æµ‹æ¨¡å‹ï¼ˆMeasurement Modelï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%8D%8F%E6%96%B9%E5%B7%AE%E4%BC%A0%E6%92%AD%E4%B8%8E%E5%A2%9E%E7%9B%8A%EF%BC%88Covariance-Propagation-amp-Kalman-Gain%EF%BC%89"><span class="toc-number">4.5.</span> <span class="toc-text">5. åæ–¹å·®ä¼ æ’­ä¸å¢ç›Šï¼ˆCovariance Propagation &amp; Kalman Gainï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%EF%BC%88State-Update%EF%BC%89"><span class="toc-number">4.6.</span> <span class="toc-text">6. çŠ¶æ€æ›´æ–°ï¼ˆState Updateï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%89%B9%E9%87%8F-vs-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%EF%BC%88%E6%97%B6%E5%BA%8F%E7%BB%93%E6%9E%84%EF%BC%89"><span class="toc-number">4.7.</span> <span class="toc-text">7. æ‰¹é‡ vs æ»‘åŠ¨çª—å£ï¼ˆæ—¶åºç»“æ„ï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E6%A6%82%E7%8E%87%E5%BB%BA%E6%A8%A1%E8%A7%86%E8%A7%92"><span class="toc-number">4.8.</span> <span class="toc-text">8. æ¦‚ç‡å»ºæ¨¡è§†è§’</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#EKF-%E7%9B%AE%E6%A0%87%EF%BC%9A"><span class="toc-number">4.8.1.</span> <span class="toc-text">EKF ç›®æ ‡ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%A0%E5%AD%90%E5%9B%BE%E7%9B%AE%E6%A0%87%EF%BC%88%E6%9C%80%E5%A4%A7%E5%90%8E%E9%AA%8C%E4%BC%B0%E8%AE%A1%EF%BC%89%EF%BC%9A"><span class="toc-number">4.8.2.</span> <span class="toc-text">å› å­å›¾ç›®æ ‡ï¼ˆæœ€å¤§åéªŒä¼°è®¡ï¼‰ï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%9C%85-%E6%80%BB%E7%BB%93%E5%AF%B9%E7%85%A7%E8%A1%A8"><span class="toc-number">4.9.</span> <span class="toc-text">âœ… æ€»ç»“å¯¹ç…§è¡¨</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BE%E4%B8%AA%E7%B2%92%E5%AD%90"><span class="toc-number">5.</span> <span class="toc-text">ä¸¾ä¸ªç²’å­</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B2%92%E5%AD%90%E2%91%A0"><span class="toc-number">5.1.</span> <span class="toc-text">ç²’å­â‘ </span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%8F%E6%A1%88%E4%BE%8B%EF%BC%9A%E4%B8%80%E7%BB%B4%E8%BD%A8%E8%BF%B9%E4%BC%B0%E8%AE%A1-%E9%AB%98%E6%96%AF%E8%A7%82%E6%B5%8B-%E5%9B%A0%E5%AD%90%E5%9B%BE%E5%BB%BA%E6%A8%A1"><span class="toc-number">6.</span> <span class="toc-text">å°æ¡ˆä¾‹ï¼šä¸€ç»´è½¨è¿¹ä¼°è®¡ + é«˜æ–¯è§‚æµ‹ + å› å­å›¾å»ºæ¨¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0%EF%BC%9A"><span class="toc-number">6.0.1.</span> <span class="toc-text">ğŸ¯ é—®é¢˜æè¿°ï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%B6-1-%E7%8A%B6%E6%80%81%E5%8F%98%E9%87%8F%E4%B8%8E%E5%9B%BE%E8%8A%82%E7%82%B9"><span class="toc-number">6.1.</span> <span class="toc-text">ğŸ”¶ 1. çŠ¶æ€å˜é‡ä¸å›¾èŠ‚ç‚¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%B6-2-%E6%9E%84%E9%80%A0%E5%9B%A0%E5%AD%90%E5%9B%BE%E7%9A%84%E5%9B%A0%E5%AD%90%E9%A1%B9%EF%BC%88%E6%AE%8B%E5%B7%AE%E9%A1%B9%EF%BC%89"><span class="toc-number">6.2.</span> <span class="toc-text">ğŸ”¶ 2. æ„é€ å› å­å›¾çš„å› å­é¡¹ï¼ˆæ®‹å·®é¡¹ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E5%85%88%E9%AA%8C%E5%9B%A0%E5%AD%90%EF%BC%9A-x-0"><span class="toc-number">6.2.1.</span> <span class="toc-text">ï¼ˆ1ï¼‰å…ˆéªŒå› å­ï¼š$x_0$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E8%BF%90%E5%8A%A8%E6%A8%A1%E5%9E%8B%E5%9B%A0%E5%AD%90%EF%BC%9A-x-k-1-rightarrow-x-k"><span class="toc-number">6.2.2.</span> <span class="toc-text">ï¼ˆ2ï¼‰è¿åŠ¨æ¨¡å‹å› å­ï¼š$x_{k-1} \rightarrow x_k$</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E8%A7%82%E6%B5%8B%E5%9B%A0%E5%AD%90%EF%BC%9A-z-k"><span class="toc-number">6.2.3.</span> <span class="toc-text">ï¼ˆ3ï¼‰è§‚æµ‹å› å­ï¼š$z_k$</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%B6-3-%E6%9E%84%E5%BB%BA%E6%80%BB%E4%BC%98%E5%8C%96%E7%9B%AE%E6%A0%87%E5%87%BD%E6%95%B0"><span class="toc-number">6.3.</span> <span class="toc-text">ğŸ”¶ 3. æ„å»ºæ€»ä¼˜åŒ–ç›®æ ‡å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%B6-4-%E6%B1%82%E8%A7%A3%EF%BC%88%E6%95%B0%E5%80%BC%E6%9C%80%E5%B0%8F%E5%8C%96%EF%BC%89"><span class="toc-number">6.4.</span> <span class="toc-text">ğŸ”¶ 4. æ±‚è§£ï¼ˆæ•°å€¼æœ€å°åŒ–ï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MATLAB-%E5%AE%9E%E7%8E%B0%EF%BC%9AEKF-%E4%B8%8E%E5%9B%A0%E5%AD%90%E5%9B%BE%E5%AF%B9%E6%AF%94"><span class="toc-number">6.5.</span> <span class="toc-text">MATLAB å®ç°ï¼šEKF ä¸å› å­å›¾å¯¹æ¯”</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B2%92%E5%AD%90%E2%91%A1"><span class="toc-number">6.6.</span> <span class="toc-text">ç²’å­â‘¡</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/d73a1929.html" title="ç¡¬ä»¶å­¦ä¹ ä¹‹-OpAmp"><img src="https://youpai.hanvon.top/blog/background/Image/praire.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ç¡¬ä»¶å­¦ä¹ ä¹‹-OpAmp"/></a><div class="content"><a class="title" href="/post/d73a1929.html" title="ç¡¬ä»¶å­¦ä¹ ä¹‹-OpAmp">ç¡¬ä»¶å­¦ä¹ ä¹‹-OpAmp</a><time datetime="2025-09-04T16:17:33.000Z" title="Created 2025-09-05 00:17:33">2025-09-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/e7138a76.html" title="AX6600é›…å…¸å¨œ è·¯ç”±å™¨ åˆ·æœº"><img src="https://youpai.hanvon.top/blog/article/Learing/Router/Athena/AX6600_Athena.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AX6600é›…å…¸å¨œ è·¯ç”±å™¨ åˆ·æœº"/></a><div class="content"><a class="title" href="/post/e7138a76.html" title="AX6600é›…å…¸å¨œ è·¯ç”±å™¨ åˆ·æœº">AX6600é›…å…¸å¨œ è·¯ç”±å™¨ åˆ·æœº</a><time datetime="2025-08-18T15:06:22.000Z" title="Created 2025-08-18 23:06:22">2025-08-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/50636d10.html" title="å®¿èˆæ”¹é€ "><img src="https://youpai.hanvon.top/homeassistant/A520/peripheral/%E9%97%A8%E7%A6%81%E4%B8%BB%E6%8E%A7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="å®¿èˆæ”¹é€ "/></a><div class="content"><a class="title" href="/post/50636d10.html" title="å®¿èˆæ”¹é€ ">å®¿èˆæ”¹é€ </a><time datetime="2025-06-11T03:17:02.000Z" title="Created 2025-06-11 11:17:02">2025-06-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/c5e86bf1.html" title="ç‚¸æœºæ—¥è®°"><img src="https://youpai.hanvon.top/blog/Mine/Daily/Master/day-to-day/some%20else/happy_ending.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ç‚¸æœºæ—¥è®°"/></a><div class="content"><a class="title" href="/post/c5e86bf1.html" title="ç‚¸æœºæ—¥è®°">ç‚¸æœºæ—¥è®°</a><time datetime="2025-03-06T13:41:25.000Z" title="Created 2025-03-06 21:41:25">2025-03-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/7ead290e.html" title="ç»„åˆå¯¼èˆªå­¦ä¹ "><img src="https://youpai.hanvon.top/blog/article/Navigation/Integrated_navigation/integrated_navigation.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ç»„åˆå¯¼èˆªå­¦ä¹ "/></a><div class="content"><a class="title" href="/post/7ead290e.html" title="ç»„åˆå¯¼èˆªå­¦ä¹ ">ç»„åˆå¯¼èˆªå­¦ä¹ </a><time datetime="2024-12-09T14:35:22.000Z" title="Created 2024-12-09 22:35:22">2024-12-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/e0c82c88.html" title="è‰¾é¡½çŸ³çš„é˜¿æ‹‰è•¾"><img src="https://youpai.hanvon.top/blog/FnL/us.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="è‰¾é¡½çŸ³çš„é˜¿æ‹‰è•¾"/></a><div class="content"><a class="title" href="/post/e0c82c88.html" title="è‰¾é¡½çŸ³çš„é˜¿æ‹‰è•¾">è‰¾é¡½çŸ³çš„é˜¿æ‹‰è•¾</a><time datetime="2024-11-21T09:44:19.000Z" title="Created 2024-11-21 17:44:19">2024-11-21</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2025 By Civil</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://beian.mps.gov.cn/#/query/webSearch"><img class="icp-icon" src="https://youpai.hanvon.top/blog/background/beian.png"><span>æ™‹ICPå¤‡2022001836å·</span></a>        <a target="_blank" rel="noopener" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"><img src="https://youpai.hanvon.top/blog/background/upyun_logo.png" align="absmiddle" width="80px" height="32px" /></a> <span>æä¾›äº‘å­˜å‚¨æœåŠ¡</span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">ç¹</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script></div><script src="/js/timing.js"></script><script src="/js/cursor.js"></script><script src="/js/cheat.js"></script><script defer="true" src="/js/welcome.js"></script><script data-pjax type="text/javascript" src="/js/essay_page/essay_page.js"></script><script data-pjax type="text/javascript" src="/js/waterfall/waterfall.js"></script><script data-pjax src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/js/swiper.min.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="120" alpha="0.3" zIndex="-1" mobile="false" data-click="true"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>